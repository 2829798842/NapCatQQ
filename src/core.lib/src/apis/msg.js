const _0x4b731f=_0x3eaa;(function(_0x44d5eb,_0x1fcac8){const _0x1143c5=_0x3eaa,_0x3cc01e=_0x44d5eb();while(!![]){try{const _0x16865d=parseInt(_0x1143c5(0x147))/0x1+-parseInt(_0x1143c5(0x161))/0x2+-parseInt(_0x1143c5(0x148))/0x3+-parseInt(_0x1143c5(0x145))/0x4+-parseInt(_0x1143c5(0x12a))/0x5+-parseInt(_0x1143c5(0x130))/0x6*(parseInt(_0x1143c5(0x134))/0x7)+parseInt(_0x1143c5(0x11d))/0x8;if(_0x16865d===_0x1fcac8)break;else _0x3cc01e['push'](_0x3cc01e['shift']());}catch(_0x467b3a){_0x3cc01e['push'](_0x3cc01e['shift']());}}}(_0x42b0,0xdd06f));import{selfInfo}from'@/core/data';function _0x3eaa(_0x2888d2,_0xf269fb){const _0x42b01a=_0x42b0();return _0x3eaa=function(_0x3eaa3a,_0x3ad285){_0x3eaa3a=_0x3eaa3a-0x116;let _0x304eda=_0x42b01a[_0x3eaa3a];return _0x304eda;},_0x3eaa(_0x2888d2,_0xf269fb);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x4b731f(0x157)]=_0x43af6b=>{const _0x4a133d=_0x4b731f;for(const [_0x37e278,_0x5683b2]of GroupFileInfoUpdateTasks){_0x5683b2(_0x43af6b),GroupFileInfoUpdateTasks[_0x4a133d(0x144)](_0x37e278);}},msgListener['onAddSendMsg']=_0x3ebbd8=>{const _0x3efe03=_0x4b731f,_0x20d59e={'crXMb':function(_0x46be27,_0x46b7a9){return _0x46be27(_0x46b7a9);},'sMJoV':function(_0x10b661,_0x90e2){return _0x10b661 instanceof _0x90e2;}};for(const [_0x4728ca,_0x5bb6f0]of sentMsgTasks){_0x20d59e[_0x3efe03(0x116)](_0x5bb6f0,_0x3ebbd8),sentMsgTasks['delete'](_0x4728ca);}if(sendMessagePool[_0x3ebbd8[_0x3efe03(0x14b)]]){const _0xeb124f=sendMessagePool[_0x3ebbd8['peerUid']]?.(_0x3ebbd8);_0x20d59e[_0x3efe03(0x132)](_0xeb124f,Promise)&&_0xeb124f[_0x3efe03(0x155)]()[_0x3efe03(0x129)](logError);}},msgListener[_0x4b731f(0x159)]=_0x573af7=>{const _0x3b3e={'fJURd':function(_0x37b942,_0x168c82){return _0x37b942 instanceof _0x168c82;},'DJCES':function(_0x14f117,_0x30b2d2){return _0x14f117(_0x30b2d2);}};_0x573af7['forEach'](_0x2b119d=>{const _0x678890=_0x3eaa,_0x5e5d4c={'yzqYj':function(_0x540421,_0x23c776){const _0x569a73=_0x3eaa;return _0x3b3e[_0x569a73(0x142)](_0x540421,_0x23c776);},'LfikL':function(_0x448bde,_0x5ba75c){const _0x21d181=_0x3eaa;return _0x3b3e[_0x21d181(0x13c)](_0x448bde,_0x5ba75c);}};new Promise((_0x2dd009,_0x405526)=>{const _0x4f13f7=_0x3eaa;for(const _0x14acf8 in sendSuccessCBMap){const _0x48c408=sendSuccessCBMap[_0x14acf8],_0x347653=_0x48c408(_0x2b119d),_0x15280b=_0xa164b7=>{_0xa164b7&&delete sendSuccessCBMap[_0x14acf8];};_0x5e5d4c[_0x4f13f7(0x12f)](_0x347653,Promise)?_0x347653['then'](_0x15280b):_0x5e5d4c['LfikL'](_0x15280b,_0x347653);}})[_0x678890(0x155)]()['catch'](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x2a0017=_0x3eaa;napCatCore[_0x2a0017(0x131)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x4b731f(0x160)](_0x5d2135,_0x67e8dd,_0x21ef2d,_0x1b9bd4=!![]){const _0x410b87=_0x4b731f,_0x4013d9={'iTPVf':function(_0x3058b2,_0x4cc559){return _0x3058b2>_0x4cc559;}};return _0x21ef2d=_0x21ef2d[_0x410b87(0x12d)](),napCatCore['session'][_0x410b87(0x151)]()[_0x410b87(0x150)](_0x5d2135,_0x67e8dd,_0x21ef2d,_0x4013d9[_0x410b87(0x14e)](_0x21ef2d[_0x410b87(0x14a)],0x3)?'2':'1',_0x1b9bd4);}static async[_0x4b731f(0x11b)](_0x49ea05,_0x139b6b,_0x1e0616){const _0x311dbb=_0x4b731f;return napCatCore[_0x311dbb(0x11f)][_0x311dbb(0x151)]()[_0x311dbb(0x11b)](_0x49ea05,_0x139b6b,_0x1e0616);}static async['getMsgsByMsgId'](_0xbeab6b,_0x20d118){const _0x4c4351=_0x4b731f;return await napCatCore[_0x4c4351(0x11f)][_0x4c4351(0x151)]()[_0x4c4351(0x14f)](_0xbeab6b,_0x20d118);}static async[_0x4b731f(0x14c)](_0xd1d957,_0x406546,_0x1482d8,_0xa5148b,_0x103e50){const _0x2a68fa=_0x4b731f;return await napCatCore[_0x2a68fa(0x11f)][_0x2a68fa(0x151)]()['getMsgsBySeqAndCount'](_0xd1d957,_0x406546,_0x1482d8,_0xa5148b,_0x103e50);}static async[_0x4b731f(0x140)](_0x447760){}static async[_0x4b731f(0x141)](_0x1391d7){}static async[_0x4b731f(0x12e)](_0x58b9d8){const _0x1b52eb=_0x4b731f;return napCatCore[_0x1b52eb(0x11f)][_0x1b52eb(0x151)]()[_0x1b52eb(0x12e)](_0x58b9d8);}static async['getGroupFileList'](_0x32c7c8,_0x2e6a4e){const _0x428211=_0x4b731f,_0xa08e4e={'shMku':_0x428211(0x11e),'xBtnr':function(_0xd729f9,_0x4ef98c){return _0xd729f9(_0x4ef98c);},'NbYsQ':function(_0x3fd1ba,_0x2aba51,_0x482eca){return _0x3fd1ba(_0x2aba51,_0x482eca);},'QtHxn':function(_0x2cf586){return _0x2cf586();}};return new Promise(async(_0x49161f,_0x175868)=>{const _0x4d86b4=_0x428211;let _0x3455f5=![];_0xa08e4e[_0x4d86b4(0x138)](setTimeout,()=>{const _0x994b5d=_0x4d86b4;!_0x3455f5&&_0x175868(_0xa08e4e[_0x994b5d(0x122)]);},0x1388);const _0x5ba03a=_0x5358fe=>{const _0x2a33ac=_0x4d86b4;_0x3455f5=!![],_0xa08e4e[_0x2a33ac(0x15c)](_0x49161f,_0x5358fe[_0x2a33ac(0x15f)]);};GroupFileInfoUpdateTasks[_0x4d86b4(0x153)](_0xa08e4e[_0x4d86b4(0x156)](randomUUID),_0x5ba03a),await napCatCore['session'][_0x4d86b4(0x13a)]()[_0x4d86b4(0x139)](_0x32c7c8,_0x2e6a4e);});}static async[_0x4b731f(0x119)](_0x15fdcb,_0x4a63e8,_0x144795){const _0x3398d4=_0x4b731f;return napCatCore[_0x3398d4(0x11f)][_0x3398d4(0x151)]()[_0x3398d4(0x117)](_0x15fdcb,_0x4a63e8,_0x144795,!![]);}static async[_0x4b731f(0x149)](){}static async[_0x4b731f(0x13b)](_0x1acc1f,_0x36a8dc){const _0x1bf5bc=_0x4b731f;await napCatCore['session'][_0x1bf5bc(0x151)]()[_0x1bf5bc(0x13b)]({'chatType':_0x1acc1f[_0x1bf5bc(0x127)],'peerUid':_0x1acc1f[_0x1bf5bc(0x14b)]},_0x36a8dc);}static async[_0x4b731f(0x15a)](_0x5b19e7,_0x44c2f3,_0x43aa90=!![],_0x174f29=0x2710){const _0x5a12b3=_0x4b731f,_0x300d82={'LZHyw':function(_0xb6921,_0x365547){return _0xb6921>_0x365547;},'LekRR':'发送超时','CxveS':function(_0x4a0df7,_0x13f7de){return _0x4a0df7(_0x13f7de);},'kFPpO':function(_0x583b67,_0x2f04b6){return _0x583b67===_0x2f04b6;},'jGbGF':function(_0x27d850,_0x4e72fe){return _0x27d850===_0x4e72fe;},'rYFff':function(_0x3a080b,_0x276af9){return _0x3a080b(_0x276af9);},'XTjLb':function(_0x327231){return _0x327231();}},_0x1f5674=_0x5b19e7['peerUid'];let _0x54bca3=0x0;const _0x5e0cea=async()=>{const _0x3e7200=_0x3eaa;if(_0x300d82[_0x3e7200(0x124)](_0x54bca3,_0x174f29))throw _0x300d82[_0x3e7200(0x13f)];const _0x20144c=sendMessagePool[_0x5b19e7[_0x3e7200(0x14b)]];if(_0x20144c)return await _0x300d82[_0x3e7200(0x143)](sleep,0x1f4),_0x54bca3+=0x1f4,await _0x5e0cea();else return;};return await _0x300d82[_0x5a12b3(0x123)](_0x5e0cea),new Promise((_0x3a470c,_0x19b29b)=>{const _0x19468f=_0x5a12b3,_0x17e479={'akVWo':_0x300d82[_0x19468f(0x13f)]};let _0x15077e=![],_0x5987c0=null;const _0x159ce6=_0x300d82[_0x19468f(0x123)](randomUUID);sendSuccessCBMap[_0x159ce6]=_0x34b0f3=>{const _0x53e0ce=_0x19468f;if(_0x300d82['kFPpO'](_0x34b0f3[_0x53e0ce(0x15b)],_0x5987c0?.[_0x53e0ce(0x15b)])){if(_0x300d82[_0x53e0ce(0x13d)](_0x34b0f3[_0x53e0ce(0x15e)],0x2))return delete sendSuccessCBMap[_0x159ce6],_0x15077e=!![],_0x300d82[_0x53e0ce(0x135)](_0x3a470c,_0x34b0f3),!![];return![];}return![];},sendMessagePool[_0x1f5674]=async _0x2757ce=>{delete sendMessagePool[_0x1f5674],_0x5987c0=_0x2757ce;},setTimeout(()=>{const _0x5f03c3=_0x19468f;if(_0x15077e)return;delete sendMessagePool[_0x1f5674],delete sendSuccessCBMap[_0x159ce6],_0x19b29b(_0x17e479[_0x5f03c3(0x125)]);},_0x174f29);const _0xb52f9b=napCatCore[_0x19468f(0x11f)]['getMsgService']()[_0x19468f(0x15a)]('0',_0x5b19e7,_0x44c2f3,new Map());});}static async[_0x4b731f(0x154)](_0x12a449,_0x2a3cd9,_0x34e777){const _0x46623f=_0x4b731f;return napCatCore[_0x46623f(0x11f)][_0x46623f(0x151)]()[_0x46623f(0x154)](_0x34e777,_0x12a449,[_0x2a3cd9],new Map());}static async['multiForwardMsg'](_0x48878f,_0x31b485,_0x19c897){const _0x420062=_0x4b731f,_0x3b482b={'OqlKq':function(_0x5ebd77,_0x49a9a1){return _0x5ebd77==_0x49a9a1;},'tYEbx':function(_0x111f03,_0x37a2fd){return _0x111f03(_0x37a2fd);},'RiGlQ':'转发消息超时','LoQwG':function(_0x25f25a){return _0x25f25a();},'obEYS':function(_0x4b8057,_0x3732e8,_0x289c89){return _0x4b8057(_0x3732e8,_0x289c89);}},_0x255dde=_0x19c897[_0x420062(0x14d)](_0x57a00c=>{return{'msgId':_0x57a00c,'senderShowName':selfInfo['nick']};});return new Promise((_0x3a9ab6,_0x46a11e)=>{const _0xe3cec6=_0x420062,_0x5d1407={'TAhIu':function(_0x58efe3,_0x5a3a95){return _0x58efe3!=_0x5a3a95;},'ceFOB':_0xe3cec6(0x128),'VbRPp':function(_0x15f42a,_0x36b8b1){const _0x3f81ac=_0xe3cec6;return _0x3b482b[_0x3f81ac(0x13e)](_0x15f42a,_0x36b8b1);},'Qcxil':function(_0x41f5fd,_0xe20e03){const _0x46f431=_0xe3cec6;return _0x3b482b[_0x46f431(0x126)](_0x41f5fd,_0xe20e03);},'BWFQq':_0x3b482b[_0xe3cec6(0x15d)]};let _0x5bed13=![];const _0x194409=_0x5206fe=>{const _0x4a7f66=_0xe3cec6,_0x326042=_0x5206fe[_0x4a7f66(0x120)][_0x4a7f66(0x136)](_0x4212f4=>_0x4212f4[_0x4a7f66(0x12b)]);if(!_0x326042)return;const _0x3e6db9=JSON[_0x4a7f66(0x137)](_0x326042[_0x4a7f66(0x12b)][_0x4a7f66(0x118)]);if(_0x5d1407[_0x4a7f66(0x11c)](_0x3e6db9[_0x4a7f66(0x146)],_0x5d1407['ceFOB']))return;_0x5d1407[_0x4a7f66(0x152)](_0x5206fe[_0x4a7f66(0x14b)],_0x31b485[_0x4a7f66(0x14b)])&&_0x5d1407[_0x4a7f66(0x152)](_0x5206fe[_0x4a7f66(0x12c)],selfInfo[_0x4a7f66(0x11a)])&&(_0x5bed13=!![],_0x5d1407[_0x4a7f66(0x133)](_0x3a9ab6,_0x5206fe));};sentMsgTasks[_0xe3cec6(0x153)](_0x3b482b['LoQwG'](randomUUID),_0x194409),_0x3b482b[_0xe3cec6(0x158)](setTimeout,()=>{!_0x5bed13&&_0x46a11e(_0x5d1407['BWFQq']);},0x1388),napCatCore['session'][_0xe3cec6(0x151)]()[_0xe3cec6(0x121)](_0x255dde,_0x48878f,_0x31b485,[],new Map());});}}function _0x42b0(){const _0x563ab5=['RiGlQ','sendStatus','item','setEmojiLike','1734924dmXeXv','crXMb','getMsgsIncludeSelf','bytesData','getMsgHistory','uid','getMultiMsg','TAhIu','30614248xUPzWy','获取群文件列表超时','session','elements','multiForwardMsgWithComment','shMku','XTjLb','LZHyw','akVWo','tYEbx','chatType','com.tencent.multimsg','catch','5264980YXRuxO','arkElement','senderUid','toString','setMsgRead','yzqYj','380778CIpyxe','addListener','sMJoV','Qcxil','91OEFVjf','rYFff','find','parse','NbYsQ','getGroupFileList','getRichMediaService','recallMsg','DJCES','jGbGF','OqlKq','LekRR','activateChat','activateChatAndGetHistory','fJURd','CxveS','delete','3058764BXMHZq','app','1710553qMaxie','3365517oefgsO','fetchRecentContact','length','peerUid','getMsgsBySeqAndCount','map','iTPVf','getMsgsByMsgId','setMsgEmojiLikes','getMsgService','VbRPp','set','forwardMsg','then','QtHxn','onGroupFileInfoUpdate','obEYS','onMsgInfoListUpdate','sendMsg','msgId','xBtnr'];_0x42b0=function(){return _0x563ab5;};return _0x42b0();}