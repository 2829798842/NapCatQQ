const _0x582694=_0x2113;(function(_0xec56a3,_0x4b7151){const _0x34c2b4=_0x2113,_0x32a0ec=_0xec56a3();while(!![]){try{const _0x214487=parseInt(_0x34c2b4(0x1bb))/0x1+parseInt(_0x34c2b4(0x1ac))/0x2*(-parseInt(_0x34c2b4(0x1a5))/0x3)+parseInt(_0x34c2b4(0x1ad))/0x4+parseInt(_0x34c2b4(0x1d3))/0x5*(-parseInt(_0x34c2b4(0x1ed))/0x6)+parseInt(_0x34c2b4(0x1c7))/0x7*(-parseInt(_0x34c2b4(0x1ce))/0x8)+-parseInt(_0x34c2b4(0x1d9))/0x9+parseInt(_0x34c2b4(0x1c2))/0xa;if(_0x214487===_0x4b7151)break;else _0x32a0ec['push'](_0x32a0ec['shift']());}catch(_0x591d47){_0x32a0ec['push'](_0x32a0ec['shift']());}}}(_0x23f9,0x6c7ae));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();function _0x23f9(){const _0x1e6f77=['getRichMediaService','4315410FssVII','multiForwardMsg','senderUid','iGcQZ','sendMsg','getMsgsIncludeSelf','cuLqx','app','HSwSS','fetchRecentContact','jCyxl','setMsgRead','OoSAs','peerUid','setEmojiLike','getGroupFileList','onMsgInfoListUpdate','BBcCn','arkElement','UcmrL','306SJLRHb','item','6gzAHYz','SQeBh','OewsI','获取群文件列表超时','parse','Rkgqp','toString','222934SLzgEy','1343476ZugzlG','QaEpz','getMultiMsg','XNHFk','addListener','PrArV','onGroupFileInfoUpdate','forwardMsg','length','getMsgsBySeqAndCount','elements','catch','sendStatus','delete','681264IrozdW','map','session','msgId','recallMsg','forEach','bytesData','10191560OntLvW','nOyfO','set','hcFaI','chatType','14WDrMqb','com.tencent.multimsg','then','gHMUx','setMsgEmojiLikes','MYGpj','yxDLP','802288UvfKOc','getMsgsByMsgId','nick','onAddSendMsg','getMsgService','67545eTXRDu','uid','转发消息超时','twcRD','wxLVy'];_0x23f9=function(){return _0x1e6f77;};return _0x23f9();}function _0x2113(_0x5aa046,_0x54e406){const _0x23f987=_0x23f9();return _0x2113=function(_0x2113d7,_0x278a07){_0x2113d7=_0x2113d7-0x1a5;let _0x3774bb=_0x23f987[_0x2113d7];return _0x3774bb;},_0x2113(_0x5aa046,_0x54e406);}msgListener[_0x582694(0x1b3)]=_0x3dbebc=>{const _0x5527b1=_0x582694;for(const [_0x189a5f,_0x19754d]of GroupFileInfoUpdateTasks){_0x19754d(_0x3dbebc),GroupFileInfoUpdateTasks[_0x5527b1(0x1ba)](_0x189a5f);}},msgListener[_0x582694(0x1d1)]=_0x1e2b59=>{const _0x27c639=_0x582694,_0xf30134={'BgJOu':function(_0x39b2a9,_0xdaf685){return _0x39b2a9(_0xdaf685);},'wxLVy':function(_0x4bb4ec,_0x395be2){return _0x4bb4ec instanceof _0x395be2;}};for(const [_0x300956,_0x2ad298]of sentMsgTasks){_0xf30134['BgJOu'](_0x2ad298,_0x1e2b59),sentMsgTasks[_0x27c639(0x1ba)](_0x300956);}if(sendMessagePool[_0x1e2b59['peerUid']]){const _0x14e553=sendMessagePool[_0x1e2b59[_0x27c639(0x1e6)]]?.(_0x1e2b59);_0xf30134[_0x27c639(0x1d7)](_0x14e553,Promise)&&_0x14e553['then']()[_0x27c639(0x1b8)](logError);}},msgListener[_0x582694(0x1e9)]=_0x101424=>{const _0x13e96a=_0x582694,_0x382ccf={'XNHFk':function(_0x5b0b9d,_0x4ebe42){return _0x5b0b9d(_0x4ebe42);},'BBcCn':function(_0x4cac6c,_0x4983f1){return _0x4cac6c instanceof _0x4983f1;}};_0x101424[_0x13e96a(0x1c0)](_0x255fca=>{const _0x259e30=_0x13e96a;new Promise((_0x20cfcf,_0x378bfb)=>{const _0x469db3=_0x2113;for(const _0x2013d5 in sendSuccessCBMap){const _0x13e44c=sendSuccessCBMap[_0x2013d5],_0x5998fa=_0x382ccf[_0x469db3(0x1b0)](_0x13e44c,_0x255fca),_0x4842eb=_0x28aeb3=>{_0x28aeb3&&delete sendSuccessCBMap[_0x2013d5];};_0x382ccf[_0x469db3(0x1ea)](_0x5998fa,Promise)?_0x5998fa[_0x469db3(0x1c9)](_0x4842eb):_0x382ccf[_0x469db3(0x1b0)](_0x4842eb,_0x5998fa);}})[_0x259e30(0x1c9)]()[_0x259e30(0x1b8)](log);});},setTimeout(()=>{napCatCore['onLoginSuccess'](()=>{const _0x3157bb=_0x2113;napCatCore[_0x3157bb(0x1b1)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x582694(0x1e7)](_0x35ef57,_0x30c64c,_0x30520f,_0x55a9ba=!![]){const _0xfa9cb1=_0x582694,_0x48bd47={'nOyfO':function(_0x414601,_0x3593a9){return _0x414601>_0x3593a9;}};return _0x30520f=_0x30520f[_0xfa9cb1(0x1ab)](),napCatCore[_0xfa9cb1(0x1bd)][_0xfa9cb1(0x1d2)]()[_0xfa9cb1(0x1cb)](_0x35ef57,_0x30c64c,_0x30520f,_0x48bd47[_0xfa9cb1(0x1c3)](_0x30520f[_0xfa9cb1(0x1b5)],0x3)?'2':'1',_0x55a9ba);}static async[_0x582694(0x1af)](_0x4f55a3,_0x189dd8,_0x39e7ea){const _0x1ba0cc=_0x582694;return napCatCore[_0x1ba0cc(0x1bd)][_0x1ba0cc(0x1d2)]()[_0x1ba0cc(0x1af)](_0x4f55a3,_0x189dd8,_0x39e7ea);}static async[_0x582694(0x1cf)](_0x21cece,_0x34244d){const _0xf8b7d7=_0x582694;return await napCatCore[_0xf8b7d7(0x1bd)]['getMsgService']()[_0xf8b7d7(0x1cf)](_0x21cece,_0x34244d);}static async['getMsgsBySeqAndCount'](_0x2a9233,_0x144f1d,_0x5ac487,_0x3e7395,_0x4270c1){const _0x41807a=_0x582694;return await napCatCore[_0x41807a(0x1bd)][_0x41807a(0x1d2)]()[_0x41807a(0x1b6)](_0x2a9233,_0x144f1d,_0x5ac487,_0x3e7395,_0x4270c1);}static async['activateChat'](_0x187ac1){}static async['activateChatAndGetHistory'](_0x3ac636){}static async[_0x582694(0x1e4)](_0x9bb1c4){const _0x51fbe5=_0x582694;return napCatCore[_0x51fbe5(0x1bd)][_0x51fbe5(0x1d2)]()[_0x51fbe5(0x1e4)](_0x9bb1c4);}static async[_0x582694(0x1e8)](_0x1f99c4,_0x21ed71){const _0x506cb0={'UcmrL':function(_0x4344c3,_0x538116,_0x456a88){return _0x4344c3(_0x538116,_0x456a88);},'oAbDF':function(_0x4642c4){return _0x4642c4();}};return new Promise(async(_0x264eb7,_0x1cc469)=>{const _0x6f7eba=_0x2113,_0x2faf3b={'MYGpj':function(_0x48b939,_0x368629){return _0x48b939(_0x368629);},'cuLqx':_0x6f7eba(0x1a8)};let _0x37a010=![];_0x506cb0[_0x6f7eba(0x1ec)](setTimeout,()=>{const _0x5ccee9=_0x6f7eba;!_0x37a010&&_0x2faf3b[_0x5ccee9(0x1cc)](_0x1cc469,_0x2faf3b[_0x5ccee9(0x1df)]);},0x1388);const _0x4a071f=_0x58fb9b=>{const _0x54819f=_0x6f7eba;_0x37a010=!![],_0x264eb7(_0x58fb9b[_0x54819f(0x1ee)]);};GroupFileInfoUpdateTasks[_0x6f7eba(0x1c4)](_0x506cb0['oAbDF'](randomUUID),_0x4a071f),await napCatCore[_0x6f7eba(0x1bd)][_0x6f7eba(0x1d8)]()[_0x6f7eba(0x1e8)](_0x1f99c4,_0x21ed71);});}static async['getMsgHistory'](_0x1d98b8,_0x47ca1d,_0x161eb5){const _0x1214af=_0x582694;return napCatCore[_0x1214af(0x1bd)][_0x1214af(0x1d2)]()[_0x1214af(0x1de)](_0x1d98b8,_0x47ca1d,_0x161eb5,!![]);}static async[_0x582694(0x1e2)](){}static async['recallMsg'](_0x2c7938,_0x295311){const _0x4a22be=_0x582694;await napCatCore[_0x4a22be(0x1bd)]['getMsgService']()[_0x4a22be(0x1bf)]({'chatType':_0x2c7938[_0x4a22be(0x1c6)],'peerUid':_0x2c7938['peerUid']},_0x295311);}static async[_0x582694(0x1dd)](_0x532495,_0x281a54,_0x71bcab=!![],_0x288f42=0x2710){const _0x25e23a=_0x582694,_0x58db53={'OewsI':function(_0x47ee78,_0x37bb25){return _0x47ee78>_0x37bb25;},'PrArV':'发送超时','tWcdc':function(_0x4bfe4e){return _0x4bfe4e();},'PUhkI':function(_0x3f0a16,_0x325b3d){return _0x3f0a16===_0x325b3d;},'iGcQZ':function(_0x159e9f){return _0x159e9f();},'QaEpz':function(_0xc7646c,_0x3d5237,_0x450bef){return _0xc7646c(_0x3d5237,_0x450bef);}},_0x445a74=_0x532495[_0x25e23a(0x1e6)];let _0x4eefe6=0x0;const _0xbdbe4d=async()=>{const _0x1efa63=_0x25e23a;if(_0x58db53[_0x1efa63(0x1a7)](_0x4eefe6,_0x288f42))throw _0x58db53[_0x1efa63(0x1b2)];const _0x4603ff=sendMessagePool[_0x532495[_0x1efa63(0x1e6)]];if(_0x4603ff)return await sleep(0x1f4),_0x4eefe6+=0x1f4,await _0x58db53['tWcdc'](_0xbdbe4d);else return;};return await _0x58db53[_0x25e23a(0x1dc)](_0xbdbe4d),new Promise((_0x2f41d2,_0x399d0e)=>{const _0x5934ea=_0x25e23a;let _0x575ecd=![],_0x4b05af=null;const _0x39649c=_0x58db53['iGcQZ'](randomUUID);sendSuccessCBMap[_0x39649c]=_0x1ebfdf=>{const _0x250941=_0x2113;if(_0x58db53['PUhkI'](_0x1ebfdf[_0x250941(0x1be)],_0x4b05af?.[_0x250941(0x1be)])){if(_0x58db53['PUhkI'](_0x1ebfdf[_0x250941(0x1b9)],0x2))return delete sendSuccessCBMap[_0x39649c],_0x575ecd=!![],_0x2f41d2(_0x1ebfdf),!![];return![];}return![];},sendMessagePool[_0x445a74]=async _0x1c45bd=>{delete sendMessagePool[_0x445a74],_0x4b05af=_0x1c45bd;},_0x58db53[_0x5934ea(0x1ae)](setTimeout,()=>{if(_0x575ecd)return;delete sendMessagePool[_0x445a74],delete sendSuccessCBMap[_0x39649c],_0x399d0e('发送超时');},_0x288f42);const _0x2f219f=napCatCore[_0x5934ea(0x1bd)][_0x5934ea(0x1d2)]()[_0x5934ea(0x1dd)]('0',_0x532495,_0x281a54,new Map());});}static async[_0x582694(0x1b4)](_0x1b917b,_0x4ca5e8,_0x5d1fe8){const _0x4186f1=_0x582694;return napCatCore[_0x4186f1(0x1bd)][_0x4186f1(0x1d2)]()[_0x4186f1(0x1b4)](_0x5d1fe8,_0x1b917b,[_0x4ca5e8],new Map());}static async[_0x582694(0x1da)](_0x3b51a8,_0x455b79,_0x2b914a){const _0x42cb6f=_0x582694,_0x10eb75={'kwXgv':function(_0x3edc4c,_0x59ee35){return _0x3edc4c!=_0x59ee35;},'HSwSS':_0x42cb6f(0x1c8),'SQeBh':function(_0x4416f4,_0x1d57d5){return _0x4416f4==_0x1d57d5;},'lbbIy':function(_0x405d6d,_0x138dd1){return _0x405d6d==_0x138dd1;},'detHc':function(_0x16f90c,_0x3efd51){return _0x16f90c(_0x3efd51);},'Rkgqp':_0x42cb6f(0x1d5),'OoSAs':function(_0x2a9728){return _0x2a9728();},'yxDLP':function(_0x4342a5,_0x5b18a8,_0x149efb){return _0x4342a5(_0x5b18a8,_0x149efb);}},_0x542e4d=_0x2b914a[_0x42cb6f(0x1bc)](_0x56281a=>{const _0x458763=_0x42cb6f;return{'msgId':_0x56281a,'senderShowName':selfInfo[_0x458763(0x1d0)]};});return new Promise((_0x3f69b0,_0x4c29e4)=>{const _0x2e32f0=_0x42cb6f,_0x253311={'hcFaI':function(_0x29362b,_0x36cea4){return _0x10eb75['kwXgv'](_0x29362b,_0x36cea4);},'twcRD':_0x10eb75[_0x2e32f0(0x1e1)],'sDjrm':function(_0x5cb6cf,_0x571b79){const _0x3aa1a6=_0x2e32f0;return _0x10eb75[_0x3aa1a6(0x1a6)](_0x5cb6cf,_0x571b79);},'jCyxl':function(_0x2af4f4,_0x2b4ec2){return _0x10eb75['lbbIy'](_0x2af4f4,_0x2b4ec2);},'LkWgQ':function(_0x572a8f,_0x5c517e){return _0x10eb75['detHc'](_0x572a8f,_0x5c517e);},'gHMUx':function(_0x2fa3d4,_0x361507){return _0x10eb75['detHc'](_0x2fa3d4,_0x361507);},'ezWnO':_0x10eb75[_0x2e32f0(0x1aa)]};let _0x549ed0=![];const _0x106160=_0xe0eb20=>{const _0x35d195=_0x2e32f0,_0xd615c6=_0xe0eb20[_0x35d195(0x1b7)]['find'](_0x20e595=>_0x20e595[_0x35d195(0x1eb)]);if(!_0xd615c6)return;const _0x487ba1=JSON[_0x35d195(0x1a9)](_0xd615c6[_0x35d195(0x1eb)][_0x35d195(0x1c1)]);if(_0x253311[_0x35d195(0x1c5)](_0x487ba1[_0x35d195(0x1e0)],_0x253311[_0x35d195(0x1d6)]))return;_0x253311['sDjrm'](_0xe0eb20[_0x35d195(0x1e6)],_0x455b79[_0x35d195(0x1e6)])&&_0x253311[_0x35d195(0x1e3)](_0xe0eb20[_0x35d195(0x1db)],selfInfo[_0x35d195(0x1d4)])&&(_0x549ed0=!![],_0x253311['LkWgQ'](_0x3f69b0,_0xe0eb20));};sentMsgTasks[_0x2e32f0(0x1c4)](_0x10eb75[_0x2e32f0(0x1e5)](randomUUID),_0x106160),_0x10eb75[_0x2e32f0(0x1cd)](setTimeout,()=>{const _0x583f06=_0x2e32f0;!_0x549ed0&&_0x253311[_0x583f06(0x1ca)](_0x4c29e4,_0x253311['ezWnO']);},0x1388),napCatCore['session'][_0x2e32f0(0x1d2)]()['multiForwardMsgWithComment'](_0x542e4d,_0x3b51a8,_0x455b79,[],new Map());});}}