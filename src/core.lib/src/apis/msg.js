const _0x1ac338=_0x2858;(function(_0x2ed178,_0x49399b){const _0x4567e1=_0x2858,_0x593573=_0x2ed178();while(!![]){try{const _0xaa43b=parseInt(_0x4567e1(0xb7))/0x1*(parseInt(_0x4567e1(0x95))/0x2)+parseInt(_0x4567e1(0x92))/0x3*(parseInt(_0x4567e1(0x87))/0x4)+-parseInt(_0x4567e1(0x8c))/0x5*(parseInt(_0x4567e1(0xcd))/0x6)+parseInt(_0x4567e1(0x99))/0x7*(-parseInt(_0x4567e1(0x8f))/0x8)+parseInt(_0x4567e1(0xbe))/0x9+parseInt(_0x4567e1(0xa4))/0xa+parseInt(_0x4567e1(0x97))/0xb;if(_0xaa43b===_0x49399b)break;else _0x593573['push'](_0x593573['shift']());}catch(_0x42373d){_0x593573['push'](_0x593573['shift']());}}}(_0x514f,0xac06f));import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';function _0x514f(){const _0x256efb=['fetchRecentContact','112998yHloHS','setMsgRead','getMsgService','QbHvD','getMsgHistory','setEmojiLike','find','ZdpaC','getGroupFileList','UZvtz','zFCcG','addListener','发送超时','12108JqnUWt','then','setMsgEmojiLikes','sendStatus','session','185swuwvo','CObSg','app','215608ZTtnUn','HQkWE','senderUid','81YEheML','delete','activateChat','5008EfthvG','uid','4033689eiqBlU','onLoginSuccess','273sQLcEo','iPkoQ','lJAsz','getMultiMsg','bytesData','sendMsg','set','getRichMediaService','peerUid','onAddSendMsg','nUgqv','7236620KCmXya','UDHYC','DRbcC','ktoTX','cfCac','getMsgsBySeqAndCount','ANWWl','nick','arkElement','VejCE','activateChatAndGetHistory','getMsgsByMsgId','forwardMsg','inKeV','length','elements','ShalP','recallMsg','com.tencent.multimsg','251hoMkjo','获取群文件列表超时','jvHct','onMsgInfoListUpdate','msgId','转发消息超时','chatType','5867451etiYKP','QjjKR','item','QUXvN','getMsgsIncludeSelf','LaWTY','multiForwardMsgWithComment','forEach','Tzhwo','caTFG','vTpPq','zNyys','catch','bZCEB'];_0x514f=function(){return _0x256efb;};return _0x514f();}import{sleep}from'@/common/utils/helper';function _0x2858(_0xeedde4,_0x557228){const _0x514f8b=_0x514f();return _0x2858=function(_0x285805,_0x4ba029){_0x285805=_0x285805-0x7f;let _0x586b98=_0x514f8b[_0x285805];return _0x586b98;},_0x2858(_0xeedde4,_0x557228);}import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0x27209d=>{const _0x23c212=_0x2858,_0xedf545={'QbHvD':function(_0x16ee4f,_0x4f61e1){return _0x16ee4f(_0x4f61e1);}};for(const [_0x46d5f3,_0x6d0693]of GroupFileInfoUpdateTasks){_0xedf545[_0x23c212(0xd0)](_0x6d0693,_0x27209d),GroupFileInfoUpdateTasks[_0x23c212(0x93)](_0x46d5f3);}},msgListener[_0x1ac338(0xa2)]=_0x305732=>{const _0x23f1a2=_0x1ac338,_0x750513={'CObSg':function(_0xac3aa3,_0x23ac46){return _0xac3aa3(_0x23ac46);}};for(const [_0x2b8225,_0x250acd]of sentMsgTasks){_0x750513[_0x23f1a2(0x8d)](_0x250acd,_0x305732),sentMsgTasks['delete'](_0x2b8225);}if(sendMessagePool[_0x305732['peerUid']]){const _0x413dd8=sendMessagePool[_0x305732[_0x23f1a2(0xa1)]]?.(_0x305732);_0x413dd8 instanceof Promise&&_0x413dd8['then']()[_0x23f1a2(0xca)](logError);}},msgListener[_0x1ac338(0xba)]=_0x302cd0=>{const _0x1a6c24=_0x1ac338,_0x406475={'QUXvN':function(_0x189ae1,_0x3f72bb){return _0x189ae1(_0x3f72bb);},'DRbcC':function(_0x3c241c,_0x559d96){return _0x3c241c instanceof _0x559d96;}};_0x302cd0[_0x1a6c24(0xc5)](_0x315020=>{const _0x362857=_0x1a6c24,_0x43beac={'VejCE':function(_0x533320,_0x2d7306){const _0x242600=_0x2858;return _0x406475[_0x242600(0xc1)](_0x533320,_0x2d7306);},'zFCcG':function(_0x1d6b8e,_0x13a09b){const _0x4efca6=_0x2858;return _0x406475[_0x4efca6(0xa6)](_0x1d6b8e,_0x13a09b);}};new Promise((_0x404e8c,_0x24a0fb)=>{const _0x218d6f=_0x2858;for(const _0x17bad8 in sendSuccessCBMap){const _0x1e63ae=sendSuccessCBMap[_0x17bad8],_0x5b28b0=_0x43beac[_0x218d6f(0xad)](_0x1e63ae,_0x315020),_0x2cc253=_0x5c14c4=>{_0x5c14c4&&delete sendSuccessCBMap[_0x17bad8];};_0x43beac[_0x218d6f(0x84)](_0x5b28b0,Promise)?_0x5b28b0[_0x218d6f(0x88)](_0x2cc253):_0x2cc253(_0x5b28b0);}})[_0x362857(0x88)]()['catch'](log);});},setTimeout(()=>{const _0x34ea4e=_0x1ac338;napCatCore[_0x34ea4e(0x98)](()=>{const _0x221e0e=_0x34ea4e;napCatCore[_0x221e0e(0x85)](msgListener);});},0x64);export class NTQQMsgApi{static async[_0x1ac338(0x7f)](_0x287f81,_0x1a0c7f,_0x15e0fd,_0x3f6f4a=!![]){const _0x16f7e1=_0x1ac338,_0x299daa={'vTpPq':function(_0x1165d0,_0x1d1e9d){return _0x1165d0>_0x1d1e9d;}};return _0x15e0fd=_0x15e0fd['toString'](),napCatCore[_0x16f7e1(0x8b)][_0x16f7e1(0xcf)]()[_0x16f7e1(0x89)](_0x287f81,_0x1a0c7f,_0x15e0fd,_0x299daa[_0x16f7e1(0xc8)](_0x15e0fd[_0x16f7e1(0xb2)],0x3)?'2':'1',_0x3f6f4a);}static async[_0x1ac338(0x9c)](_0x331dc0,_0x1a7ee3,_0x2b940c){const _0x2d7277=_0x1ac338;return napCatCore[_0x2d7277(0x8b)][_0x2d7277(0xcf)]()[_0x2d7277(0x9c)](_0x331dc0,_0x1a7ee3,_0x2b940c);}static async[_0x1ac338(0xaf)](_0x3a6c41,_0x500d40){const _0x79ffac=_0x1ac338;return await napCatCore[_0x79ffac(0x8b)][_0x79ffac(0xcf)]()[_0x79ffac(0xaf)](_0x3a6c41,_0x500d40);}static async[_0x1ac338(0xa9)](_0x355579,_0x34221c,_0x2a64a5,_0x43b939,_0x59bf27){const _0x149724=_0x1ac338;return await napCatCore['session'][_0x149724(0xcf)]()[_0x149724(0xa9)](_0x355579,_0x34221c,_0x2a64a5,_0x43b939,_0x59bf27);}static async[_0x1ac338(0x94)](_0x1eb000){}static async[_0x1ac338(0xae)](_0x20e77f){}static async[_0x1ac338(0xce)](_0x49efaa){const _0x402c32=_0x1ac338;return napCatCore[_0x402c32(0x8b)][_0x402c32(0xcf)]()['setMsgRead'](_0x49efaa);}static async[_0x1ac338(0x82)](_0x5cb898,_0x1687df){const _0x290904={'iPkoQ':function(_0x44b24c,_0x4da698){return _0x44b24c(_0x4da698);},'fimuY':function(_0x22c011,_0x55caad){return _0x22c011(_0x55caad);},'ANWWl':function(_0x1f06ed,_0x6ae18f,_0x223dd9){return _0x1f06ed(_0x6ae18f,_0x223dd9);}};return new Promise(async(_0x3597db,_0x484b34)=>{const _0x2402d4=_0x2858;let _0x23ff49=![];_0x290904[_0x2402d4(0xaa)](setTimeout,()=>{const _0x47fd8d=_0x2402d4;!_0x23ff49&&_0x290904[_0x47fd8d(0x9a)](_0x484b34,_0x47fd8d(0xb8));},0x1388);const _0x394f77=_0x514d92=>{const _0x4b96e6=_0x2402d4;_0x23ff49=!![],_0x290904['fimuY'](_0x3597db,_0x514d92[_0x4b96e6(0xc0)]);};GroupFileInfoUpdateTasks[_0x2402d4(0x9f)](randomUUID(),_0x394f77),await napCatCore[_0x2402d4(0x8b)][_0x2402d4(0xa0)]()[_0x2402d4(0x82)](_0x5cb898,_0x1687df);});}static async[_0x1ac338(0xd1)](_0xd82c04,_0x79d742,_0xe459b6){const _0xdcc383=_0x1ac338;return napCatCore[_0xdcc383(0x8b)][_0xdcc383(0xcf)]()[_0xdcc383(0xc2)](_0xd82c04,_0x79d742,_0xe459b6,!![]);}static async[_0x1ac338(0xcc)](){}static async[_0x1ac338(0xb5)](_0x3fe504,_0x29b9ea){const _0x2c5e7c=_0x1ac338;await napCatCore[_0x2c5e7c(0x8b)][_0x2c5e7c(0xcf)]()['recallMsg']({'chatType':_0x3fe504[_0x2c5e7c(0xbd)],'peerUid':_0x3fe504[_0x2c5e7c(0xa1)]},_0x29b9ea);}static async[_0x1ac338(0x9e)](_0x4cd911,_0x17bba4,_0x3ba579=!![],_0x1853b6=0x2710){const _0xc65cf6=_0x1ac338,_0x1842af={'caTFG':function(_0x5e61c5,_0x2318ac){return _0x5e61c5>_0x2318ac;},'ShalP':function(_0x388d24,_0x3eaea0){return _0x388d24(_0x3eaea0);},'zNyys':function(_0x556a45,_0x2c7ac7){return _0x556a45===_0x2c7ac7;},'ZdpaC':function(_0x485015,_0x2f24ed){return _0x485015(_0x2f24ed);},'ktoTX':'发送超时','jvHct':function(_0x4794b6){return _0x4794b6();}},_0x5848ca=_0x4cd911[_0xc65cf6(0xa1)];let _0x44edd7=0x0;const _0x4b0b33=async()=>{const _0x175096=_0xc65cf6;if(_0x1842af[_0x175096(0xc7)](_0x44edd7,_0x1853b6))throw _0x175096(0x86);const _0x3b11fb=sendMessagePool[_0x4cd911[_0x175096(0xa1)]];if(_0x3b11fb)return await _0x1842af[_0x175096(0xb4)](sleep,0x1f4),_0x44edd7+=0x1f4,await _0x4b0b33();else return;};return await _0x1842af[_0xc65cf6(0xb9)](_0x4b0b33),new Promise((_0x5af983,_0x24bf2c)=>{const _0x269d5a=_0xc65cf6,_0x34ad77={'sjeAV':function(_0x3ec4fd,_0xef196a){const _0x4912ce=_0x2858;return _0x1842af[_0x4912ce(0xc9)](_0x3ec4fd,_0xef196a);},'inKeV':function(_0xb08939,_0x56ffbb){const _0x31d430=_0x2858;return _0x1842af[_0x31d430(0x81)](_0xb08939,_0x56ffbb);},'TWkem':_0x1842af[_0x269d5a(0xa7)]};let _0x166698=![],_0x1223ed=null;const _0x4ca3bb=randomUUID();sendSuccessCBMap[_0x4ca3bb]=_0x1080fa=>{const _0x262c6e=_0x269d5a;if(_0x34ad77['sjeAV'](_0x1080fa[_0x262c6e(0xbb)],_0x1223ed?.[_0x262c6e(0xbb)])){if(_0x1080fa[_0x262c6e(0x8a)]===0x2)return delete sendSuccessCBMap[_0x4ca3bb],_0x166698=!![],_0x34ad77[_0x262c6e(0xb1)](_0x5af983,_0x1080fa),!![];return![];}return![];},sendMessagePool[_0x5848ca]=async _0x2a56f3=>{delete sendMessagePool[_0x5848ca],_0x1223ed=_0x2a56f3;},setTimeout(()=>{if(_0x166698)return;delete sendMessagePool[_0x5848ca],delete sendSuccessCBMap[_0x4ca3bb],_0x34ad77['inKeV'](_0x24bf2c,_0x34ad77['TWkem']);},_0x1853b6);const _0x1586dc=napCatCore[_0x269d5a(0x8b)][_0x269d5a(0xcf)]()['sendMsg']('0',_0x4cd911,_0x17bba4,new Map());});}static async[_0x1ac338(0xb0)](_0x567cf1,_0x2d6241,_0x4d839b){const _0x199c1a=_0x1ac338;return napCatCore['session'][_0x199c1a(0xcf)]()[_0x199c1a(0xb0)](_0x4d839b,_0x567cf1,[_0x2d6241],new Map());}static async['multiForwardMsg'](_0x5f5085,_0x185805,_0x1db402){const _0x2e6601=_0x1ac338,_0x288723={'PVrbO':function(_0x148476,_0x461e0a){return _0x148476(_0x461e0a);},'UZvtz':function(_0x542f28,_0x1b5538){return _0x542f28!=_0x1b5538;},'nUgqv':_0x2e6601(0xb6),'HQkWE':function(_0x1e91da,_0x1e1761){return _0x1e91da==_0x1e1761;},'UDHYC':function(_0x35eea2,_0x2f3fa0){return _0x35eea2(_0x2f3fa0);},'LaWTY':function(_0x308f22){return _0x308f22();},'QjjKR':function(_0x10d2c0,_0x32679b,_0x3e5f37){return _0x10d2c0(_0x32679b,_0x3e5f37);}},_0x18239f=_0x1db402['map'](_0x54ba8a=>{const _0x4875cc=_0x2e6601;return{'msgId':_0x54ba8a,'senderShowName':selfInfo[_0x4875cc(0xab)]};});return new Promise((_0x5d59f1,_0x5a428f)=>{const _0x25546d=_0x2e6601,_0x3ee075={'lJAsz':function(_0x264139,_0xf27781){const _0x2e4cd7=_0x2858;return _0x288723[_0x2e4cd7(0x83)](_0x264139,_0xf27781);},'bZCEB':_0x288723[_0x25546d(0xa3)],'cfCac':function(_0x186939,_0x37b41e){const _0x12626c=_0x25546d;return _0x288723[_0x12626c(0x90)](_0x186939,_0x37b41e);},'Tzhwo':function(_0x3688ab,_0x451ffa){const _0x411739=_0x25546d;return _0x288723[_0x411739(0xa5)](_0x3688ab,_0x451ffa);}};let _0x38c613=![];const _0x4b0d19=_0xa7a001=>{const _0x438d4a=_0x25546d,_0x5642f9=_0xa7a001[_0x438d4a(0xb3)][_0x438d4a(0x80)](_0xe02a2d=>_0xe02a2d['arkElement']);if(!_0x5642f9)return;const _0xa30595=JSON['parse'](_0x5642f9[_0x438d4a(0xac)][_0x438d4a(0x9d)]);if(_0x3ee075[_0x438d4a(0x9b)](_0xa30595[_0x438d4a(0x8e)],_0x3ee075[_0x438d4a(0xcb)]))return;_0xa7a001[_0x438d4a(0xa1)]==_0x185805['peerUid']&&_0x3ee075[_0x438d4a(0xa8)](_0xa7a001[_0x438d4a(0x91)],selfInfo[_0x438d4a(0x96)])&&(_0x38c613=!![],_0x3ee075[_0x438d4a(0xc6)](_0x5d59f1,_0xa7a001));};sentMsgTasks[_0x25546d(0x9f)](_0x288723[_0x25546d(0xc3)](randomUUID),_0x4b0d19),_0x288723[_0x25546d(0xbf)](setTimeout,()=>{const _0x9a2f55=_0x25546d;!_0x38c613&&_0x288723['PVrbO'](_0x5a428f,_0x9a2f55(0xbc));},0x1388),napCatCore['session'][_0x25546d(0xcf)]()[_0x25546d(0xc4)](_0x18239f,_0x5f5085,_0x185805,[],new Map());});}}