const _0x51ba30=_0x1223;(function(_0x5dd03a,_0x2ac542){const _0x54ba30=_0x1223,_0x16ffd3=_0x5dd03a();while(!![]){try{const _0x288a94=parseInt(_0x54ba30(0x19e))/0x1*(-parseInt(_0x54ba30(0x187))/0x2)+parseInt(_0x54ba30(0x198))/0x3*(parseInt(_0x54ba30(0x188))/0x4)+parseInt(_0x54ba30(0x19a))/0x5+-parseInt(_0x54ba30(0x174))/0x6+-parseInt(_0x54ba30(0x1a0))/0x7*(parseInt(_0x54ba30(0x1b1))/0x8)+-parseInt(_0x54ba30(0x197))/0x9+parseInt(_0x54ba30(0x171))/0xa;if(_0x288a94===_0x2ac542)break;else _0x16ffd3['push'](_0x16ffd3['shift']());}catch(_0x2e5251){_0x16ffd3['push'](_0x16ffd3['shift']());}}}(_0x2ba0,0x8abd4));function _0x1223(_0x4f69da,_0x127b61){const _0x2ba080=_0x2ba0();return _0x1223=function(_0x1223cd,_0x104c41){_0x1223cd=_0x1223cd-0x16e;let _0x554acb=_0x2ba080[_0x1223cd];return _0x554acb;},_0x1223(_0x4f69da,_0x127b61);}import{selfInfo}from'@/core/data';import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';function _0x2ba0(){const _0x3cfe81=['1091660UyqXqd','PZlKk','发送超时','senderUid','356008JrOvNQ','getGroupFileList','881881rnbRAk','VCAJS','getMultiMsg','chatType','getMsgService','elements','peerUid','cLmhx','item','activateChatAndGetHistory','delete','arkElement','kxhwU','ScWUG','OUiAY','app','imCuL','16LHTJKI','mPnGq','获取群文件列表超时','PYTRJ','recallMsg','activateChat','parse','forwardMsg','sendMsg','length','gTZMl','catch','23541450HCFBqG','LzHBX','multiForwardMsg','1757046twVYcB','qrJRr','RCkKY','onLoginSuccess','YiPEn','aqqvP','set','OTShG','bytesData','getRichMediaService','TOIBB','getMsgsBySeqAndCount','com.tencent.multimsg','setMsgRead','MaMXn','then','nick','HVPcc','XZOpz','6kUTRQz','140zHGhPq','hZRKv','getMsgsByMsgId','onAddSendMsg','getMsgsIncludeSelf','uid','fetchRecentContact','JjWpX','find','KEpoP','onMsgInfoListUpdate','session','forEach','msgId','转发消息超时','4121145omJeiB','5703eXQjLn','map'];_0x2ba0=function(){return _0x3cfe81;};return _0x2ba0();}const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener['onGroupFileInfoUpdate']=_0x1c1c38=>{const _0x4ae961=_0x1223,_0x4a8809={'qrJRr':function(_0x3b4e77,_0x162b5b){return _0x3b4e77(_0x162b5b);}};for(const [_0x40e240,_0x3fbdad]of GroupFileInfoUpdateTasks){_0x4a8809[_0x4ae961(0x175)](_0x3fbdad,_0x1c1c38),GroupFileInfoUpdateTasks[_0x4ae961(0x1aa)](_0x40e240);}},msgListener[_0x51ba30(0x18b)]=_0x295d23=>{const _0x15323a=_0x51ba30,_0x432c4e={'gTZMl':function(_0x78755f,_0x18729f){return _0x78755f(_0x18729f);}};for(const [_0x21f96e,_0x18de80]of sentMsgTasks){_0x432c4e[_0x15323a(0x16f)](_0x18de80,_0x295d23),sentMsgTasks[_0x15323a(0x1aa)](_0x21f96e);}if(sendMessagePool[_0x295d23[_0x15323a(0x1a6)]]){const _0x556744=sendMessagePool[_0x295d23[_0x15323a(0x1a6)]]?.(_0x295d23);_0x556744 instanceof Promise&&_0x556744[_0x15323a(0x183)]()[_0x15323a(0x170)](logError);}},msgListener[_0x51ba30(0x192)]=_0x265f18=>{const _0x1b42a1=_0x51ba30,_0x1a0845={'PZlKk':function(_0x43dad2,_0x2d2344){return _0x43dad2 instanceof _0x2d2344;}};_0x265f18[_0x1b42a1(0x194)](_0x4d394f=>{const _0x38ecb4=_0x1b42a1,_0x4b8905={'OTShG':function(_0x352b5c,_0x53bbb5){return _0x352b5c(_0x53bbb5);},'cLmhx':function(_0x49d66d,_0x4dce31){const _0x3d3231=_0x1223;return _0x1a0845[_0x3d3231(0x19b)](_0x49d66d,_0x4dce31);}};new Promise((_0x174033,_0x48a7d7)=>{const _0xbd1fd6=_0x1223;for(const _0x3a44fe in sendSuccessCBMap){const _0x22cf1a=sendSuccessCBMap[_0x3a44fe],_0x212ad9=_0x4b8905[_0xbd1fd6(0x17b)](_0x22cf1a,_0x4d394f),_0xbb10bc=_0xb59030=>{_0xb59030&&delete sendSuccessCBMap[_0x3a44fe];};_0x4b8905[_0xbd1fd6(0x1a7)](_0x212ad9,Promise)?_0x212ad9[_0xbd1fd6(0x183)](_0xbb10bc):_0x4b8905[_0xbd1fd6(0x17b)](_0xbb10bc,_0x212ad9);}})[_0x38ecb4(0x183)]()['catch'](log);});},setTimeout(()=>{const _0x25a39c=_0x51ba30;napCatCore[_0x25a39c(0x177)](()=>{napCatCore['addListener'](msgListener);});},0x64);export class NTQQMsgApi{static async['setEmojiLike'](_0x50db03,_0x40d08f,_0xd9bf2d,_0x2da56e=!![]){const _0x4ba1e2=_0x51ba30,_0x38c42b={'YiPEn':function(_0x53f299,_0x58392a){return _0x53f299>_0x58392a;}};return _0xd9bf2d=_0xd9bf2d['toString'](),napCatCore['session']['getMsgService']()['setMsgEmojiLikes'](_0x50db03,_0x40d08f,_0xd9bf2d,_0x38c42b[_0x4ba1e2(0x178)](_0xd9bf2d[_0x4ba1e2(0x16e)],0x3)?'2':'1',_0x2da56e);}static async[_0x51ba30(0x1a2)](_0x1ee64e,_0x34484e,_0x1dd693){const _0x56d7cc=_0x51ba30;return napCatCore[_0x56d7cc(0x193)][_0x56d7cc(0x1a4)]()[_0x56d7cc(0x1a2)](_0x1ee64e,_0x34484e,_0x1dd693);}static async[_0x51ba30(0x18a)](_0x24b36b,_0x1f378f){const _0x2a91bb=_0x51ba30;return await napCatCore['session'][_0x2a91bb(0x1a4)]()['getMsgsByMsgId'](_0x24b36b,_0x1f378f);}static async[_0x51ba30(0x17f)](_0x337592,_0x299e81,_0x5356c1,_0x4b4ed8,_0x384972){const _0x78f52=_0x51ba30;return await napCatCore[_0x78f52(0x193)][_0x78f52(0x1a4)]()[_0x78f52(0x17f)](_0x337592,_0x299e81,_0x5356c1,_0x4b4ed8,_0x384972);}static async[_0x51ba30(0x1b6)](_0x1b8ff1){}static async[_0x51ba30(0x1a9)](_0xbcfcbe){}static async[_0x51ba30(0x181)](_0x3b7304){const _0x55b6fe=_0x51ba30;return napCatCore[_0x55b6fe(0x193)][_0x55b6fe(0x1a4)]()[_0x55b6fe(0x181)](_0x3b7304);}static async[_0x51ba30(0x19f)](_0x4a6cef,_0x4bf3fb){const _0x58909d=_0x51ba30,_0x1cbd6f={'jnsdz':function(_0x291c67,_0x3ab6e3){return _0x291c67(_0x3ab6e3);},'ScWUG':_0x58909d(0x1b3),'hZRKv':function(_0x1427e1,_0xec0675){return _0x1427e1(_0xec0675);},'MaMXn':function(_0x677db1,_0x3f75c7,_0x5c00e7){return _0x677db1(_0x3f75c7,_0x5c00e7);}};return new Promise(async(_0x5cefd0,_0x9f8543)=>{const _0x40be52=_0x58909d;let _0x454582=![];_0x1cbd6f[_0x40be52(0x182)](setTimeout,()=>{const _0x42ccce=_0x40be52;!_0x454582&&_0x1cbd6f['jnsdz'](_0x9f8543,_0x1cbd6f[_0x42ccce(0x1ad)]);},0x1388);const _0x347ac4=_0x94f1df=>{const _0x487778=_0x40be52;_0x454582=!![],_0x1cbd6f[_0x487778(0x189)](_0x5cefd0,_0x94f1df[_0x487778(0x1a8)]);};GroupFileInfoUpdateTasks[_0x40be52(0x17a)](randomUUID(),_0x347ac4),await napCatCore[_0x40be52(0x193)][_0x40be52(0x17d)]()['getGroupFileList'](_0x4a6cef,_0x4bf3fb);});}static async['getMsgHistory'](_0x292a89,_0x14148a,_0x4a1708){const _0x312497=_0x51ba30;return napCatCore[_0x312497(0x193)][_0x312497(0x1a4)]()[_0x312497(0x18c)](_0x292a89,_0x14148a,_0x4a1708,!![]);}static async[_0x51ba30(0x18e)](){}static async[_0x51ba30(0x1b5)](_0x4d9073,_0x323a65){const _0x481229=_0x51ba30;await napCatCore['session']['getMsgService']()[_0x481229(0x1b5)]({'chatType':_0x4d9073[_0x481229(0x1a3)],'peerUid':_0x4d9073['peerUid']},_0x323a65);}static async[_0x51ba30(0x1b9)](_0x22f5a5,_0x14b5b8,_0x261175=!![],_0x5809ce=0x2710){const _0x3b0ed3=_0x51ba30,_0x59b884={'KEpoP':function(_0x4a0284,_0x470d13){return _0x4a0284>_0x470d13;},'OUiAY':function(_0x3ebe76,_0x173753){return _0x3ebe76(_0x173753);},'XZOpz':function(_0x1f77b4){return _0x1f77b4();},'PYTRJ':function(_0x5618a8,_0x516595){return _0x5618a8===_0x516595;},'XszFT':function(_0x428b34,_0x533b88){return _0x428b34(_0x533b88);},'kxhwU':_0x3b0ed3(0x19c),'KKrlM':function(_0x16582b,_0x23b168,_0x196c75){return _0x16582b(_0x23b168,_0x196c75);},'imCuL':function(_0x39d39b){return _0x39d39b();}},_0x39de64=_0x22f5a5['peerUid'];let _0x16455a=0x0;const _0x40a53e=async()=>{const _0x746f71=_0x3b0ed3;if(_0x59b884[_0x746f71(0x191)](_0x16455a,_0x5809ce))throw _0x746f71(0x19c);const _0x194307=sendMessagePool[_0x22f5a5[_0x746f71(0x1a6)]];if(_0x194307)return await _0x59b884[_0x746f71(0x1ae)](sleep,0x1f4),_0x16455a+=0x1f4,await _0x59b884[_0x746f71(0x186)](_0x40a53e);else return;};return await _0x59b884[_0x3b0ed3(0x1b0)](_0x40a53e),new Promise((_0x391553,_0x4af5b2)=>{const _0x4f7598=_0x3b0ed3;let _0x136694=![],_0xf621b3=null;const _0x2dc44c=randomUUID();sendSuccessCBMap[_0x2dc44c]=_0x54d885=>{const _0x53a063=_0x1223;if(_0x59b884['PYTRJ'](_0x54d885[_0x53a063(0x195)],_0xf621b3?.['msgId'])){if(_0x59b884[_0x53a063(0x1b4)](_0x54d885['sendStatus'],0x2))return delete sendSuccessCBMap[_0x2dc44c],_0x136694=!![],_0x59b884['XszFT'](_0x391553,_0x54d885),!![];return![];}return![];},sendMessagePool[_0x39de64]=async _0x1c055e=>{delete sendMessagePool[_0x39de64],_0xf621b3=_0x1c055e;},_0x59b884['KKrlM'](setTimeout,()=>{const _0x351286=_0x1223;if(_0x136694)return;delete sendMessagePool[_0x39de64],delete sendSuccessCBMap[_0x2dc44c],_0x59b884[_0x351286(0x1ae)](_0x4af5b2,_0x59b884[_0x351286(0x1ac)]);},_0x5809ce);const _0x402e5f=napCatCore[_0x4f7598(0x193)]['getMsgService']()[_0x4f7598(0x1b9)]('0',_0x22f5a5,_0x14b5b8,new Map());});}static async['forwardMsg'](_0x8017b7,_0x24596a,_0x2b9e00){const _0x34df2f=_0x51ba30;return napCatCore[_0x34df2f(0x193)]['getMsgService']()[_0x34df2f(0x1b8)](_0x2b9e00,_0x8017b7,[_0x24596a],new Map());}static async[_0x51ba30(0x173)](_0x518f98,_0x3fb919,_0x33cfeb){const _0x554036=_0x51ba30,_0x5c913={'aqqvP':function(_0x5d131e,_0x1adf88){return _0x5d131e(_0x1adf88);},'TOIBB':_0x554036(0x196),'RCkKY':function(_0x3505ff,_0x372092){return _0x3505ff!=_0x372092;},'VCAJS':_0x554036(0x180),'JjWpX':function(_0x166256,_0x4fab48){return _0x166256==_0x4fab48;},'yadwJ':function(_0x494296,_0x5e2378,_0x308854){return _0x494296(_0x5e2378,_0x308854);}},_0x3eb33b=_0x33cfeb[_0x554036(0x199)](_0x1b9198=>{const _0x180e4c=_0x554036;return{'msgId':_0x1b9198,'senderShowName':selfInfo[_0x180e4c(0x184)]};});return new Promise((_0x4bf8cc,_0x29c455)=>{const _0x1902c6=_0x554036,_0x1afb82={'mPnGq':function(_0xdbcf02,_0xc08d40){const _0x494b2f=_0x1223;return _0x5c913[_0x494b2f(0x176)](_0xdbcf02,_0xc08d40);},'HVPcc':_0x5c913[_0x1902c6(0x1a1)],'LzHBX':function(_0x12a368,_0x24e72a){const _0x283840=_0x1902c6;return _0x5c913[_0x283840(0x18f)](_0x12a368,_0x24e72a);}};let _0x11626d=![];const _0xff1b1a=_0x33ec35=>{const _0x42511d=_0x1902c6,_0x14ae66=_0x33ec35[_0x42511d(0x1a5)][_0x42511d(0x190)](_0x5db948=>_0x5db948[_0x42511d(0x1ab)]);if(!_0x14ae66)return;const _0x553e41=JSON[_0x42511d(0x1b7)](_0x14ae66[_0x42511d(0x1ab)][_0x42511d(0x17c)]);if(_0x1afb82[_0x42511d(0x1b2)](_0x553e41[_0x42511d(0x1af)],_0x1afb82[_0x42511d(0x185)]))return;_0x1afb82[_0x42511d(0x172)](_0x33ec35[_0x42511d(0x1a6)],_0x3fb919['peerUid'])&&_0x33ec35[_0x42511d(0x19d)]==selfInfo[_0x42511d(0x18d)]&&(_0x11626d=!![],_0x4bf8cc(_0x33ec35));};sentMsgTasks[_0x1902c6(0x17a)](randomUUID(),_0xff1b1a),_0x5c913['yadwJ'](setTimeout,()=>{const _0x443963=_0x1902c6;!_0x11626d&&_0x5c913[_0x443963(0x179)](_0x29c455,_0x5c913[_0x443963(0x17e)]);},0x1388),napCatCore[_0x1902c6(0x193)][_0x1902c6(0x1a4)]()['multiForwardMsgWithComment'](_0x3eb33b,_0x518f98,_0x3fb919,[],new Map());});}}