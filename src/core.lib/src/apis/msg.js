const _0x3c0d2a=_0x2632;(function(_0x35bcb1,_0x51edf2){const _0x4bdab0=_0x2632,_0x5104fd=_0x35bcb1();while(!![]){try{const _0x5ed87b=parseInt(_0x4bdab0(0x20a))/0x1*(-parseInt(_0x4bdab0(0x1fb))/0x2)+-parseInt(_0x4bdab0(0x1e4))/0x3+parseInt(_0x4bdab0(0x202))/0x4+parseInt(_0x4bdab0(0x1f4))/0x5*(-parseInt(_0x4bdab0(0x1df))/0x6)+-parseInt(_0x4bdab0(0x1f3))/0x7*(-parseInt(_0x4bdab0(0x1d6))/0x8)+-parseInt(_0x4bdab0(0x20e))/0x9+parseInt(_0x4bdab0(0x203))/0xa*(parseInt(_0x4bdab0(0x1c7))/0xb);if(_0x5ed87b===_0x51edf2)break;else _0x5104fd['push'](_0x5104fd['shift']());}catch(_0x313235){_0x5104fd['push'](_0x5104fd['shift']());}}}(_0x4c25,0xc379d));import{selfInfo}from'@/core/data';function _0x2632(_0x5bbd56,_0x5370ca){const _0x4c256e=_0x4c25();return _0x2632=function(_0x26324c,_0x2373bd){_0x26324c=_0x26324c-0x1c4;let _0x312007=_0x4c256e[_0x26324c];return _0x312007;},_0x2632(_0x5bbd56,_0x5370ca);}import{log,logError}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/listeners';import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},GroupFileInfoUpdateTasks=new Map(),sentMsgTasks=new Map(),msgListener=new MsgListener();msgListener[_0x3c0d2a(0x1f8)]=_0x2964c9=>{const _0x34425b=_0x3c0d2a,_0x33c4c9={'ftYuW':function(_0x3a3ee4,_0x415c18){return _0x3a3ee4(_0x415c18);}};for(const [_0x7f67ff,_0x9a142c]of GroupFileInfoUpdateTasks){_0x33c4c9[_0x34425b(0x204)](_0x9a142c,_0x2964c9),GroupFileInfoUpdateTasks['delete'](_0x7f67ff);}},msgListener[_0x3c0d2a(0x1fa)]=_0x1f4947=>{const _0x1fd111=_0x3c0d2a,_0x3e270d={'XzJql':function(_0x2dbdd0,_0x73b6e3){return _0x2dbdd0(_0x73b6e3);},'nPoaT':function(_0xe02469,_0x46463d){return _0xe02469 instanceof _0x46463d;}};for(const [_0x492d55,_0x1bbb1d]of sentMsgTasks){_0x3e270d[_0x1fd111(0x1e9)](_0x1bbb1d,_0x1f4947),sentMsgTasks[_0x1fd111(0x20c)](_0x492d55);}if(sendMessagePool[_0x1f4947[_0x1fd111(0x1f0)]]){const _0x3651d8=sendMessagePool[_0x1f4947[_0x1fd111(0x1f0)]]?.(_0x1f4947);_0x3e270d[_0x1fd111(0x1f9)](_0x3651d8,Promise)&&_0x3651d8[_0x1fd111(0x20d)]()['catch'](logError);}},msgListener[_0x3c0d2a(0x207)]=_0x44bb99=>{const _0x3ea3a3=_0x3c0d2a,_0x5b51d6={'MRkjM':function(_0x27205e,_0x74970){return _0x27205e(_0x74970);},'Dildp':function(_0x22076c,_0x283e84){return _0x22076c instanceof _0x283e84;}};_0x44bb99[_0x3ea3a3(0x1ef)](_0x3d196f=>{const _0x7aa3fa=_0x3ea3a3,_0xd66255={'ZzhEP':function(_0x26b5d4,_0x553064){return _0x5b51d6['MRkjM'](_0x26b5d4,_0x553064);},'pouxF':function(_0x5f48e4,_0x197aa0){return _0x5b51d6['Dildp'](_0x5f48e4,_0x197aa0);},'opArG':function(_0x26149f,_0x1c1140){return _0x26149f(_0x1c1140);}};new Promise((_0x507d01,_0x1a22f4)=>{const _0xe6faf0=_0x2632;for(const _0x14630f in sendSuccessCBMap){const _0x3a5283=sendSuccessCBMap[_0x14630f],_0x2ce1de=_0xd66255[_0xe6faf0(0x1de)](_0x3a5283,_0x3d196f),_0x31a255=_0x536f09=>{_0x536f09&&delete sendSuccessCBMap[_0x14630f];};_0xd66255[_0xe6faf0(0x1d8)](_0x2ce1de,Promise)?_0x2ce1de['then'](_0x31a255):_0xd66255['opArG'](_0x31a255,_0x2ce1de);}})[_0x7aa3fa(0x20d)]()[_0x7aa3fa(0x1f5)](log);});},setTimeout(()=>{const _0x21a927=_0x3c0d2a;napCatCore[_0x21a927(0x1d5)](()=>{const _0x3ff054=_0x21a927;napCatCore[_0x3ff054(0x1cd)](msgListener);});},0x64);function _0x4c25(){const _0x53d644=['multiForwardMsg','getMsgsByMsgId','onLoginSuccess','157136vRTgSf','senderUid','pouxF','parse','getGroupFileList','getMsgService','FRqXq','arkElement','ZzhEP','6OVGayD','multiForwardMsgWithComment','item','QfqOG','BKRyf','3267810BweCUe','CEffR','Qchlb','uid','HGcuK','XzJql','length','jyLWG','app','toString','转发消息超时','forEach','peerUid','msgId','getRichMediaService','14kmmJfo','6429245pJjGEd','catch','recallMsg','set','onGroupFileInfoUpdate','nPoaT','onAddSendMsg','1941292bAiuqj','sendMsg','KgfME','getMsgHistory','map','session','zwpZl','949808kzqIbB','850LqlOhC','ftYuW','获取群文件列表超时','setEmojiLike','onMsgInfoListUpdate','GrrbN','getMultiMsg','1fpRFrO','find','delete','then','8226153jYfXHC','setMsgRead','bytesData','oiWEZ','forwardMsg','619069tAlBSn','PXVHa','getMsgsBySeqAndCount','bEUrU','activateChat','com.tencent.multimsg','addListener','发送超时','VLVuW','setMsgEmojiLikes','NGiyZ','sendStatus'];_0x4c25=function(){return _0x53d644;};return _0x4c25();}export class NTQQMsgApi{static async[_0x3c0d2a(0x206)](_0xea4b38,_0x40e890,_0x31c3ca,_0xe52677=!![]){const _0xd30d22=_0x3c0d2a;return _0x31c3ca=_0x31c3ca[_0xd30d22(0x1ed)](),napCatCore[_0xd30d22(0x200)][_0xd30d22(0x1db)]()[_0xd30d22(0x1d0)](_0xea4b38,_0x40e890,_0x31c3ca,_0x31c3ca[_0xd30d22(0x1ea)]>0x3?'2':'1',_0xe52677);}static async[_0x3c0d2a(0x209)](_0x1ac187,_0x3cb478,_0xd8d11f){const _0xc47651=_0x3c0d2a;return napCatCore['session']['getMsgService']()[_0xc47651(0x209)](_0x1ac187,_0x3cb478,_0xd8d11f);}static async[_0x3c0d2a(0x1d4)](_0x4401f5,_0x4af6d5){const _0x47ee01=_0x3c0d2a;return await napCatCore[_0x47ee01(0x200)]['getMsgService']()[_0x47ee01(0x1d4)](_0x4401f5,_0x4af6d5);}static async[_0x3c0d2a(0x1c9)](_0x478805,_0xdaea21,_0x42ee24,_0x48a892,_0x78674a){const _0x3d0f45=_0x3c0d2a;return await napCatCore[_0x3d0f45(0x200)]['getMsgService']()[_0x3d0f45(0x1c9)](_0x478805,_0xdaea21,_0x42ee24,_0x48a892,_0x78674a);}static async[_0x3c0d2a(0x1cb)](_0x26626b){}static async['activateChatAndGetHistory'](_0x428dba){}static async[_0x3c0d2a(0x20f)](_0x1e9827){const _0x5464de=_0x3c0d2a;return napCatCore[_0x5464de(0x200)]['getMsgService']()[_0x5464de(0x20f)](_0x1e9827);}static async[_0x3c0d2a(0x1da)](_0x13b06a,_0xb971d3){const _0x324a61=_0x3c0d2a,_0x129462={'GrrbN':function(_0x56b009,_0x1e61de){return _0x56b009(_0x1e61de);},'HGcuK':_0x324a61(0x205),'jyLWG':function(_0x191493,_0x33cbd0,_0x53e9fc){return _0x191493(_0x33cbd0,_0x53e9fc);},'VLVuW':function(_0x7da5e7){return _0x7da5e7();}};return new Promise(async(_0x2d3d61,_0x4f8920)=>{const _0xbf383e=_0x324a61,_0xa2fcbc={'jEtVv':function(_0x108893,_0x2a9567){const _0x4a626f=_0x2632;return _0x129462[_0x4a626f(0x208)](_0x108893,_0x2a9567);},'zwpZl':_0x129462[_0xbf383e(0x1e8)]};let _0x377c33=![];_0x129462[_0xbf383e(0x1eb)](setTimeout,()=>{const _0x26ee3f=_0xbf383e;!_0x377c33&&_0xa2fcbc['jEtVv'](_0x4f8920,_0xa2fcbc[_0x26ee3f(0x201)]);},0x1388);const _0x435a27=_0x3dc936=>{const _0x301bb1=_0xbf383e;_0x377c33=!![],_0x2d3d61(_0x3dc936[_0x301bb1(0x1e1)]);};GroupFileInfoUpdateTasks[_0xbf383e(0x1f7)](_0x129462[_0xbf383e(0x1cf)](randomUUID),_0x435a27),await napCatCore[_0xbf383e(0x200)][_0xbf383e(0x1f2)]()[_0xbf383e(0x1da)](_0x13b06a,_0xb971d3);});}static async[_0x3c0d2a(0x1fe)](_0x37d13a,_0x364ef8,_0xe28508){const _0x4a8bfe=_0x3c0d2a;return napCatCore[_0x4a8bfe(0x200)][_0x4a8bfe(0x1db)]()['getMsgsIncludeSelf'](_0x37d13a,_0x364ef8,_0xe28508,!![]);}static async['fetchRecentContact'](){}static async[_0x3c0d2a(0x1f6)](_0x411651,_0x3b15b2){const _0x5b486f=_0x3c0d2a;await napCatCore[_0x5b486f(0x200)][_0x5b486f(0x1db)]()['recallMsg']({'chatType':_0x411651['chatType'],'peerUid':_0x411651[_0x5b486f(0x1f0)]},_0x3b15b2);}static async[_0x3c0d2a(0x1fc)](_0x220d3a,_0xd16b4e,_0x3b7177=!![],_0x12b27d=0x2710){const _0x3bc098=_0x3c0d2a,_0x193b09={'QfqOG':_0x3bc098(0x1ce),'qrmIu':function(_0x258c9e,_0x14e049){return _0x258c9e(_0x14e049);},'FRqXq':function(_0x32f431){return _0x32f431();},'NGiyZ':function(_0x524877,_0xb28d50){return _0x524877===_0xb28d50;},'PXVHa':function(_0x359e75,_0x234d2f){return _0x359e75===_0x234d2f;},'Qchlb':function(_0x585bc4){return _0x585bc4();},'oiWEZ':function(_0x117e50){return _0x117e50();}},_0x13100a=_0x220d3a[_0x3bc098(0x1f0)];let _0x450e3b=0x0;const _0x41db03=async()=>{const _0x452354=_0x3bc098;if(_0x450e3b>_0x12b27d)throw _0x193b09[_0x452354(0x1e2)];const _0x15362a=sendMessagePool[_0x220d3a['peerUid']];if(_0x15362a)return await _0x193b09['qrmIu'](sleep,0x1f4),_0x450e3b+=0x1f4,await _0x193b09[_0x452354(0x1dc)](_0x41db03);else return;};return await _0x193b09[_0x3bc098(0x1c5)](_0x41db03),new Promise((_0x1c3d25,_0x1a2b70)=>{const _0x3b641b=_0x3bc098;let _0x1a680e=![],_0x2cd63d=null;const _0x3447d2=_0x193b09[_0x3b641b(0x1e6)](randomUUID);sendSuccessCBMap[_0x3447d2]=_0x562d81=>{const _0x508eb9=_0x3b641b;if(_0x193b09[_0x508eb9(0x1d1)](_0x562d81[_0x508eb9(0x1f1)],_0x2cd63d?.[_0x508eb9(0x1f1)])){if(_0x193b09[_0x508eb9(0x1c8)](_0x562d81[_0x508eb9(0x1d2)],0x2))return delete sendSuccessCBMap[_0x3447d2],_0x1a680e=!![],_0x1c3d25(_0x562d81),!![];return![];}return![];},sendMessagePool[_0x13100a]=async _0x2efa6f=>{delete sendMessagePool[_0x13100a],_0x2cd63d=_0x2efa6f;},setTimeout(()=>{const _0x2d2e83=_0x3b641b;if(_0x1a680e)return;delete sendMessagePool[_0x13100a],delete sendSuccessCBMap[_0x3447d2],_0x1a2b70(_0x193b09[_0x2d2e83(0x1e2)]);},_0x12b27d);const _0x3b023d=napCatCore[_0x3b641b(0x200)]['getMsgService']()[_0x3b641b(0x1fc)]('0',_0x220d3a,_0xd16b4e,new Map());});}static async[_0x3c0d2a(0x1c6)](_0x47641e,_0x52ef08,_0x4cf134){const _0x9f0372=_0x3c0d2a;return napCatCore[_0x9f0372(0x200)]['getMsgService']()['forwardMsg'](_0x4cf134,_0x47641e,[_0x52ef08],new Map());}static async[_0x3c0d2a(0x1d3)](_0x331067,_0x17f8de,_0xc8de6e){const _0x521fa3=_0x3c0d2a,_0xc70bc2={'KgfME':function(_0x34f0c1,_0x4aa7b7){return _0x34f0c1==_0x4aa7b7;},'CEffR':function(_0x17349d,_0x3b05d0){return _0x17349d==_0x3b05d0;},'aOSqG':_0x521fa3(0x1ee),'BKRyf':function(_0x5f49c4){return _0x5f49c4();},'bEUrU':function(_0x495106,_0x4e8d82,_0x2e82f9){return _0x495106(_0x4e8d82,_0x2e82f9);}},_0x5cc2b3=_0xc8de6e[_0x521fa3(0x1ff)](_0x282be1=>{return{'msgId':_0x282be1,'senderShowName':selfInfo['nick']};});return new Promise((_0x5bb455,_0xeb9b02)=>{const _0x3dfd32=_0x521fa3;let _0x466809=![];const _0x3b7fb4=_0x5ed729=>{const _0x4c1739=_0x2632,_0xac58b2=_0x5ed729['elements'][_0x4c1739(0x20b)](_0x247fe9=>_0x247fe9[_0x4c1739(0x1dd)]);if(!_0xac58b2)return;const _0x56404c=JSON[_0x4c1739(0x1d9)](_0xac58b2[_0x4c1739(0x1dd)][_0x4c1739(0x1c4)]);if(_0x56404c[_0x4c1739(0x1ec)]!=_0x4c1739(0x1cc))return;_0xc70bc2[_0x4c1739(0x1fd)](_0x5ed729[_0x4c1739(0x1f0)],_0x17f8de[_0x4c1739(0x1f0)])&&_0xc70bc2[_0x4c1739(0x1e5)](_0x5ed729[_0x4c1739(0x1d7)],selfInfo[_0x4c1739(0x1e7)])&&(_0x466809=!![],_0x5bb455(_0x5ed729));};sentMsgTasks[_0x3dfd32(0x1f7)](_0xc70bc2[_0x3dfd32(0x1e3)](randomUUID),_0x3b7fb4),_0xc70bc2[_0x3dfd32(0x1ca)](setTimeout,()=>{!_0x466809&&_0xeb9b02(_0xc70bc2['aOSqG']);},0x1388),napCatCore[_0x3dfd32(0x200)][_0x3dfd32(0x1db)]()[_0x3dfd32(0x1e0)](_0x5cc2b3,_0x331067,_0x17f8de,[],new Map());});}}