(function(_0x5b9c4a,_0x5232d6){const _0x2dcba0=_0x4c96,_0x1f2af4=_0x5b9c4a();while(!![]){try{const _0x485d46=-parseInt(_0x2dcba0(0xd8))/0x1*(parseInt(_0x2dcba0(0xd5))/0x2)+parseInt(_0x2dcba0(0xd4))/0x3*(-parseInt(_0x2dcba0(0xb6))/0x4)+parseInt(_0x2dcba0(0xfe))/0x5+parseInt(_0x2dcba0(0xe2))/0x6+-parseInt(_0x2dcba0(0xe9))/0x7+-parseInt(_0x2dcba0(0xe7))/0x8*(parseInt(_0x2dcba0(0xc8))/0x9)+-parseInt(_0x2dcba0(0x101))/0xa;if(_0x485d46===_0x5232d6)break;else _0x1f2af4['push'](_0x1f2af4['shift']());}catch(_0x1b24d2){_0x1f2af4['push'](_0x1f2af4['shift']());}}}(_0x4765,0xa3242));import{logDebug}from'@/common/utils/log';import{NTQQUserApi}from'./user';import{selfInfo}from'../data';import{RequestUtil}from'@/common/utils/request';import{WebApi}from'./webapi';import{checkFileReceived2,uri2local}from'@/common/utils/file';function _0x4c96(_0xf41ec0,_0x39e6be){const _0x476557=_0x4765();return _0x4c96=function(_0x4c964e,_0x37b837){_0x4c964e=_0x4c964e-0xaa;let _0x48cb4e=_0x476557[_0x4c964e];return _0x48cb4e;},_0x4c96(_0xf41ec0,_0x39e6be);}import _0x187827 from'node:fs';export async function SignMiniApp(_0x56fe47){const _0xd479f5=_0x4c96,_0x288853={'XbslS':_0xd479f5(0xce),'VhbUZ':'tianxuan.imgJumpArk','groDA':_0xd479f5(0xbb),'GofIh':_0xd479f5(0x103),'Paynp':_0xd479f5(0xed),'uxuhE':function(_0x70d30,_0x59dcbc){return _0x70d30+_0x59dcbc;},'YgRvs':function(_0x5d9f1a,_0x124756){return _0x5d9f1a+_0x124756;},'hsNwP':_0xd479f5(0xff),'pKmnQ':_0xd479f5(0xdd),'pUdeV':';\x20uin=o','mWzTU':function(_0x3b857b,_0x54419f){return _0x3b857b+_0x54419f;},'tCbfa':function(_0x45b677,_0x263d8d){return _0x45b677+_0x263d8d;},'TKYmK':_0xd479f5(0xab),'pRsyB':function(_0x4e586a,_0x2f933c){return _0x4e586a(_0x2f933c);},'qTpdw':_0xd479f5(0xe4),'pQXzt':function(_0x2efc68,_0x10c709,_0x66d7c1){return _0x2efc68(_0x10c709,_0x66d7c1);},'HulSU':'MiniApp\x20JSON\x20消息生成失败'};let _0x20de4d={'app':_0x288853[_0xd479f5(0xde)],'bizsrc':_0x288853[_0xd479f5(0xec)],'view':_0x288853['groDA'],'prompt':_0x56fe47[_0xd479f5(0xd0)],'config':{'type':_0x288853[_0xd479f5(0xb7)],'forward':0x1,'autosize':0x0},'meta':{'miniapp':{'title':_0x56fe47[_0xd479f5(0xb8)],'preview':_0x56fe47['preview'][_0xd479f5(0xb3)](/\\/g,_0x288853[_0xd479f5(0xf2)]),'jumpUrl':_0x56fe47[_0xd479f5(0xba)][_0xd479f5(0xb3)](/\\/g,_0x288853[_0xd479f5(0xf2)]),'tag':_0x56fe47[_0xd479f5(0xb5)],'tagIcon':_0x56fe47[_0xd479f5(0xf7)][_0xd479f5(0xb3)](/\\/g,_0x288853[_0xd479f5(0xf2)]),'source':_0x56fe47[_0xd479f5(0xc1)],'sourcelogo':_0x56fe47['sourcelogo'][_0xd479f5(0xb3)](/\\/g,_0xd479f5(0xed))}}},_0x4572d5=await NTQQUserApi[_0xd479f5(0xe3)]();const _0x56ebc8=WebApi[_0xd479f5(0xf9)](_0x4572d5[_0xd479f5(0xaf)]),_0x49972d=_0x288853[_0xd479f5(0xd9)](_0x288853[_0xd479f5(0xeb)](_0x288853[_0xd479f5(0xc5)]+_0x4572d5[_0xd479f5(0xaf)],_0x288853[_0xd479f5(0xd6)])+_0x4572d5[_0xd479f5(0xda)]+';\x20p_uin=o'+selfInfo[_0xd479f5(0x102)],_0x288853['pUdeV'])+selfInfo['uin'];let _0x2e628b=_0x288853[_0xd479f5(0xf5)](_0x288853['uxuhE'](_0x288853[_0xd479f5(0xdb)](_0x288853[_0xd479f5(0xef)],_0x56ebc8),_0xd479f5(0xac)),_0x288853[_0xd479f5(0xb0)](encodeURIComponent,JSON[_0xd479f5(0xfa)](_0x20de4d))),_0x146c9c='';try{let _0x1c0bfa=await RequestUtil[_0xd479f5(0xad)](_0x2e628b,_0x288853[_0xd479f5(0xf0)],undefined,{'Cookie':_0x49972d});_0x146c9c=_0x1c0bfa[_0xd479f5(0xbe)]['signed_ark'];}catch(_0xa15fa2){_0x288853[_0xd479f5(0xee)](logDebug,_0x288853[_0xd479f5(0xd2)],_0xa15fa2);}return _0x146c9c;}export async function SignMusicInternal(_0x358429,_0x4d7a8f,_0x365f9b,_0x22242c,_0x2e9c2e){const _0x1a384a=_0x4c96,_0x28fa4b={'GMeOl':_0x1a384a(0xe1),'CWUbY':_0x1a384a(0xe5),'vgEqm':_0x1a384a(0xc2),'CPzow':function(_0x684bd5,_0x944008){return _0x684bd5+_0x944008;},'WAAQh':_0x1a384a(0xf8),'rBfaP':_0x1a384a(0xc7),'rPnnr':_0x1a384a(0xcc),'QFUcX':function(_0x4a81c0,_0x39d639){return _0x4a81c0+_0x39d639;},'qtxqq':_0x1a384a(0xe6),'nisMK':_0x1a384a(0xfd),'otspQ':_0x1a384a(0xb9),'JOMaL':_0x1a384a(0xae),'FJTXs':_0x1a384a(0xd3)};let _0x2efbad=_0x28fa4b[_0x1a384a(0xb1)],_0x4d44c7={'app':_0x28fa4b[_0x1a384a(0xbd)],'config':{'ctime':0x6670467e,'forward':0x1,'token':_0x28fa4b[_0x1a384a(0xe8)],'type':_0x1a384a(0x103)},'extra':{'app_type':0x1,'appid':0x5fd779c,'msg_seq':0xc7a7f60e2d080800,'uin':0x674d9a89},'meta':{'music':{'action':'','android_pkg_name':'','app_type':0x1,'appid':0x5fd779c,'ctime':0x6670467e,'desc':_0x4d7a8f,'jumpUrl':_0x28fa4b['CPzow'](_0x28fa4b[_0x1a384a(0xca)],_0x22242c)+'&type=0','musicUrl':_0x2e9c2e,'preview':_0x365f9b,'cover':_0x365f9b,'sourceMsgId':'0','source_icon':_0x28fa4b[_0x1a384a(0xf1)],'source_url':'','tag':_0x28fa4b['rPnnr'],'title':_0x358429,'uin':0x2766}},'prompt':_0x28fa4b['QFUcX'](_0x28fa4b['qtxqq'],_0x358429),'ver':'0.0.0.1','view':_0x28fa4b['nisMK']},_0x3084d4=await RequestUtil[_0x1a384a(0xad)](_0x2efbad,_0x28fa4b[_0x1a384a(0xdf)],_0x4d44c7,{'Cookie':_0x28fa4b['JOMaL'],'Content-Type':_0x28fa4b[_0x1a384a(0xd1)]});return _0x3084d4;}export async function CreateMusicThridWay0(_0x22cf4d='',_0x5be69c=''){const _0x521ce9=_0x4c96,_0x2204a5={'HlCOW':function(_0x3657c5,_0x257f96){return _0x3657c5==_0x257f96;},'nRlAJ':function(_0x4e1bcb,_0x282b89){return _0x4e1bcb+_0x282b89;},'xkWay':_0x521ce9(0x104),'MFFFu':_0x521ce9(0xe4),'xonvG':function(_0x137d39,_0x207c0d){return _0x137d39+_0x207c0d;},'GSyRG':_0x521ce9(0xbc),'cGjRz':_0x521ce9(0xf6)};if(_0x2204a5[_0x521ce9(0xb4)](_0x5be69c,'')){let _0x182783=await RequestUtil[_0x521ce9(0xad)](_0x2204a5[_0x521ce9(0xe0)](_0x2204a5[_0x521ce9(0xea)],_0x22cf4d)+_0x521ce9(0xfc),_0x2204a5[_0x521ce9(0xaa)],undefined);_0x5be69c=_0x182783['songinfo']?.['data']?.[_0x521ce9(0xdc)][_0x521ce9(0xcd)];}let _0x42acfd=await RequestUtil['HttpGetJson'](_0x2204a5[_0x521ce9(0xb2)](_0x2204a5['GSyRG'],_0x5be69c)+_0x2204a5[_0x521ce9(0xc3)],'GET',undefined);return{..._0x42acfd[_0x521ce9(0xbe)],'mid':_0x5be69c};}export async function CreateMusicThridWay1(_0x207850='',_0x252886=''){}export async function SignMusicWrapper(_0x174b7b=''){const _0xfdb904=_0x4c96,_0x4523df={'iPuXh':function(_0x36333e,_0x41c38b){return _0x36333e(_0x41c38b);},'gXtMX':function(_0x51d105,_0x68e6fb){return _0x51d105||_0x68e6fb;},'IJesH':function(_0x40933b,_0x52464a,_0x1bee6e,_0x8e91b5,_0x3d43bd,_0xd1ed){return _0x40933b(_0x52464a,_0x1bee6e,_0x8e91b5,_0x3d43bd,_0xd1ed);},'DXNep':function(_0x33fc97,_0x5b51eb){return _0x33fc97+_0x5b51eb;},'gBvUk':_0xfdb904(0xfb)};let _0x13dbff=await CreateMusicThridWay0(_0x174b7b);const {path:_0x28d29d,isLocal:_0x2c5caf,errMsg:_0x1e2dfd}=await _0x4523df[_0xfdb904(0xbf)](uri2local,_0x13dbff[_0xfdb904(0xf3)]);if(_0x4523df[_0xfdb904(0xd7)](_0x1e2dfd,!_0x28d29d))throw'卡片图片不正确';await checkFileReceived2(_0x28d29d,0x1388);let _0x1039cf=await RequestUtil[_0xfdb904(0x100)](_0x28d29d);!_0x2c5caf&&_0x187827[_0xfdb904(0xf4)](_0x28d29d,()=>{});let _0x46ad9a=await _0x4523df[_0xfdb904(0xc9)](SignMusicInternal,_0x13dbff[_0xfdb904(0xc4)],_0x13dbff[_0xfdb904(0xcb)],_0x1039cf,_0x13dbff['mid'],_0x4523df[_0xfdb904(0xc0)](_0x4523df[_0xfdb904(0xcf)],_0x13dbff[_0xfdb904(0xc6)]));return _0x46ad9a;}function _0x4765(){const _0xafa662=['otspQ','nRlAJ','https://mqq.reader.qq.com/api/mqq/share/card?accessToken&_csrfToken&source=c0003','7888182Genhbi','getQzoneCookies','GET','com.tencent.qqreader.share','[分享]','111016dpeRKj','vgEqm','455770qOtZcg','xkWay','YgRvs','VhbUZ','\x5c/\x5c/','pQXzt','TKYmK','qTpdw','rBfaP','Paynp','cover','unlink','mWzTU','&type=8','tagIcon','https://i.y.qq.com/v8/playsong.html?songmid=','genBkn','stringify','https://ws.stream.qqmusic.qq.com/','},\x22module\x22:\x22music.pf_song_detail_svr\x22}}','music','5576410kWNxmB','p_skey=','uploadImageForOpenPlatform','4133180jebGYF','uin','normal','https://u.y.qq.com/cgi-bin/musicu.fcg?format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&needNewCode=0&data={\x22comm\x22:{\x22ct\x22:24,\x22cv\x22:0},\x22songinfo\x22:{\x22method\x22:\x22get_song_detail_yqq\x22,\x22param\x22:{\x22song_type\x22:0,\x22song_mid\x22:\x22\x22,\x22song_id\x22:','MFFFu','https://h5.qzone.qq.com/v2/vip/tx/trpc/ark-share/GenNewSignedArk?g_tk=','&ark=','HttpGetJson','uin=o10086','p_skey','pRsyB','GMeOl','xonvG','replace','HlCOW','tag','4VINojK','GofIh','title','POST','jumpUrl','miniapp','https://api.leafone.cn/api/qqmusic?id=','CWUbY','data','iPuXh','DXNep','source','9a63343c32d5a16bcde653eb97faa25d','cGjRz','name','hsNwP','url','https://p.qpic.cn/qqconnect/0/app_100497308_1626060999/100?max-age=2592000&t=0','9DDpFpZ','IJesH','WAAQh','singer','QQ音乐','mid','com.tencent.miniapp.lua','gBvUk','prompt','FJTXs','HulSU','application/json','775389UsSrKI','134798OXJSag','pKmnQ','gXtMX','15uDeuiW','uxuhE','skey','tCbfa','track_info',';\x20skey=','XbslS'];_0x4765=function(){return _0xafa662;};return _0x4765();}