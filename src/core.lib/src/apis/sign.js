(function(_0x49fce1,_0x4bd00d){const _0x2fe610=_0x1789,_0x41d891=_0x49fce1();while(!![]){try{const _0x8065fb=-parseInt(_0x2fe610(0x242))/0x1+-parseInt(_0x2fe610(0x1f0))/0x2+parseInt(_0x2fe610(0x1fe))/0x3*(parseInt(_0x2fe610(0x247))/0x4)+parseInt(_0x2fe610(0x218))/0x5*(parseInt(_0x2fe610(0x21a))/0x6)+-parseInt(_0x2fe610(0x1f2))/0x7+-parseInt(_0x2fe610(0x229))/0x8*(-parseInt(_0x2fe610(0x213))/0x9)+parseInt(_0x2fe610(0x245))/0xa*(parseInt(_0x2fe610(0x220))/0xb);if(_0x8065fb===_0x4bd00d)break;else _0x41d891['push'](_0x41d891['shift']());}catch(_0x278668){_0x41d891['push'](_0x41d891['shift']());}}}(_0x3414,0xba252));import{logDebug}from'@/common/utils/log';import{NTQQUserApi}from'./user';import{selfInfo}from'../data';import{RequestUtil}from'@/common/utils/request';import{WebApi}from'./webapi';import{checkFileReceived2,uri2local}from'@/common/utils/file';import _0x5b5ce2 from'node:fs';function _0x1789(_0x7c46ef,_0x3e8c1c){const _0x341488=_0x3414();return _0x1789=function(_0x178953,_0x37d277){_0x178953=_0x178953-0x1eb;let _0x162070=_0x341488[_0x178953];return _0x162070;},_0x1789(_0x7c46ef,_0x3e8c1c);}export async function SignMiniApp(_0x2db10f){const _0x5a254d=_0x1789,_0x17ee8c={'yXcQe':_0x5a254d(0x1f9),'zNXgt':_0x5a254d(0x20c),'rxOHn':'normal','BsHot':'\x5c/\x5c/','aZRTk':function(_0x5c74a8,_0x4d5919){return _0x5c74a8+_0x4d5919;},'GSYzD':function(_0x3b290a,_0x385a1e){return _0x3b290a+_0x385a1e;},'zFhYY':_0x5a254d(0x231),'MpLRG':';\x20skey=','eiFFv':_0x5a254d(0x1fb),'JNjJi':_0x5a254d(0x212),'BffYN':function(_0x1afc18,_0x1d1caf){return _0x1afc18+_0x1d1caf;},'pdrzP':_0x5a254d(0x236),'NQRkd':_0x5a254d(0x21e),'aYtGs':function(_0x41d39f,_0x491526){return _0x41d39f(_0x491526);},'lmLBI':function(_0xfb1561,_0x240082,_0x1fb2ba){return _0xfb1561(_0x240082,_0x1fb2ba);},'Vcrxr':'MiniApp\x20JSON\x20消息生成失败'};let _0x177267={'app':_0x17ee8c[_0x5a254d(0x23c)],'bizsrc':_0x17ee8c[_0x5a254d(0x21d)],'view':_0x5a254d(0x214),'prompt':_0x2db10f[_0x5a254d(0x20e)],'config':{'type':_0x17ee8c[_0x5a254d(0x205)],'forward':0x1,'autosize':0x0},'meta':{'miniapp':{'title':_0x2db10f[_0x5a254d(0x232)],'preview':_0x2db10f[_0x5a254d(0x207)]['replace'](/\\/g,_0x5a254d(0x1f7)),'jumpUrl':_0x2db10f[_0x5a254d(0x1fd)][_0x5a254d(0x1ff)](/\\/g,_0x17ee8c[_0x5a254d(0x23f)]),'tag':_0x2db10f[_0x5a254d(0x203)],'tagIcon':_0x2db10f['tagIcon'][_0x5a254d(0x1ff)](/\\/g,_0x17ee8c[_0x5a254d(0x23f)]),'source':_0x2db10f[_0x5a254d(0x23b)],'sourcelogo':_0x2db10f[_0x5a254d(0x215)]['replace'](/\\/g,_0x5a254d(0x1f7))}}},_0x26c970=await NTQQUserApi[_0x5a254d(0x238)]();const _0x9abf50=WebApi[_0x5a254d(0x227)](_0x26c970['p_skey']),_0x20bd04=_0x17ee8c[_0x5a254d(0x1f8)](_0x17ee8c[_0x5a254d(0x1f8)](_0x17ee8c[_0x5a254d(0x1f8)](_0x17ee8c[_0x5a254d(0x1f8)](_0x17ee8c[_0x5a254d(0x1f4)](_0x17ee8c[_0x5a254d(0x22f)]+_0x26c970[_0x5a254d(0x20d)],_0x17ee8c['MpLRG'])+_0x26c970[_0x5a254d(0x1eb)],_0x17ee8c[_0x5a254d(0x21c)]),selfInfo[_0x5a254d(0x1fc)]),_0x17ee8c[_0x5a254d(0x219)]),selfInfo[_0x5a254d(0x1fc)]);let _0x2bfc61=_0x17ee8c[_0x5a254d(0x249)](_0x17ee8c[_0x5a254d(0x1f8)](_0x17ee8c[_0x5a254d(0x1ed)],_0x9abf50)+_0x17ee8c['NQRkd'],_0x17ee8c[_0x5a254d(0x20a)](encodeURIComponent,JSON[_0x5a254d(0x1f6)](_0x177267))),_0xb66356='';try{let _0x5017f0=await RequestUtil[_0x5a254d(0x237)](_0x2bfc61,_0x5a254d(0x208),undefined,{'Cookie':_0x20bd04});_0xb66356=_0x5017f0[_0x5a254d(0x23d)][_0x5a254d(0x1ee)];}catch(_0x1a01c1){_0x17ee8c['lmLBI'](logDebug,_0x17ee8c[_0x5a254d(0x23e)],_0x1a01c1);}return _0xb66356;}export async function SignMusicInternal(_0x523bc1,_0x3cfaec,_0x2e79fd,_0x2dca2a,_0x5c6a43){const _0x9b25f2=_0x1789,_0x560975={'THJJl':_0x9b25f2(0x233),'ejHNy':_0x9b25f2(0x1ef),'uObBb':_0x9b25f2(0x22d),'zmaEp':function(_0x1320e2,_0x240746){return _0x1320e2+_0x240746;},'qxwDV':_0x9b25f2(0x248),'EnuKx':_0x9b25f2(0x210),'bdIFC':function(_0x2298e9,_0x5877f2){return _0x2298e9+_0x5877f2;},'lQghV':_0x9b25f2(0x240),'bxEqy':'0.0.0.1','ihmPY':'music','wOLWR':_0x9b25f2(0x211),'CiCVt':_0x9b25f2(0x22c)};let _0x294160=_0x9b25f2(0x1ec),_0x322f52={'app':_0x560975['THJJl'],'config':{'ctime':0x6670467e,'forward':0x1,'token':_0x560975[_0x9b25f2(0x241)],'type':_0x560975[_0x9b25f2(0x1f5)]},'extra':{'app_type':0x1,'appid':0x5fd779c,'msg_seq':0xc7a7f60e2d080800,'uin':0x674d9a89},'meta':{'music':{'action':'','android_pkg_name':'','app_type':0x1,'appid':0x5fd779c,'ctime':0x6670467e,'desc':_0x3cfaec,'jumpUrl':_0x560975['zmaEp'](_0x560975[_0x9b25f2(0x222)](_0x9b25f2(0x23a),_0x2dca2a),_0x9b25f2(0x217)),'musicUrl':_0x5c6a43,'preview':_0x2e79fd,'cover':_0x2e79fd,'sourceMsgId':'0','source_icon':_0x560975['qxwDV'],'source_url':'','tag':_0x560975[_0x9b25f2(0x22b)],'title':_0x523bc1,'uin':0x2766}},'prompt':_0x560975[_0x9b25f2(0x235)](_0x560975[_0x9b25f2(0x243)],_0x523bc1),'ver':_0x560975['bxEqy'],'view':_0x560975[_0x9b25f2(0x209)]},_0x6e5331=await RequestUtil[_0x9b25f2(0x237)](_0x294160,_0x560975[_0x9b25f2(0x224)],_0x322f52,{'Cookie':_0x9b25f2(0x200),'Content-Type':_0x560975[_0x9b25f2(0x206)]});return _0x6e5331;}export async function CreateMusicThridWay0(_0x24fd7f='',_0x48e301=''){const _0x757684=_0x1789,_0x4d0e64={'nyEKm':function(_0x433efa,_0x5b39ed){return _0x433efa==_0x5b39ed;},'BEUhP':function(_0x3a1846,_0x55deb0){return _0x3a1846+_0x55deb0;},'kRXxC':_0x757684(0x223),'tKmkq':_0x757684(0x234),'AUZVH':_0x757684(0x208),'Dxyrb':function(_0x45e57a,_0x4fc51d){return _0x45e57a+_0x4fc51d;},'UouCw':_0x757684(0x21f)};if(_0x4d0e64[_0x757684(0x225)](_0x48e301,'')){let _0x61919a=await RequestUtil['HttpGetJson'](_0x4d0e64[_0x757684(0x20f)](_0x4d0e64[_0x757684(0x20f)](_0x4d0e64[_0x757684(0x22a)],_0x24fd7f),_0x4d0e64[_0x757684(0x22e)]),_0x4d0e64['AUZVH'],undefined);_0x48e301=_0x61919a[_0x757684(0x20b)]?.[_0x757684(0x23d)]?.[_0x757684(0x246)][_0x757684(0x21b)];}let _0x312557=await RequestUtil[_0x757684(0x237)](_0x4d0e64[_0x757684(0x1f1)](_0x4d0e64['UouCw'],_0x48e301)+_0x757684(0x201),_0x757684(0x208),undefined);return{..._0x312557['data'],'mid':_0x48e301};}export async function CreateMusicThridWay1(_0x559edd='',_0x5053d8=''){}function _0x3414(){const _0x1e8a51=['getQzoneCookies','sObGt','https://i.y.qq.com/v8/playsong.html?songmid=','source','yXcQe','data','Vcrxr','BsHot','[分享]','ejHNy','539648tkVApf','lQghV','qDeYu','40qXosIb','track_info','22180WAtATA','https://p.qpic.cn/qqconnect/0/app_100497308_1626060999/100?max-age=2592000&t=0','BffYN','skey','https://mqq.reader.qq.com/api/mqq/share/card?accessToken&_csrfToken&source=c0003','pdrzP','signed_ark','9a63343c32d5a16bcde653eb97faa25d','996910FxpdCk','Dxyrb','6780697txDAGC','ysMwv','GSYzD','uObBb','stringify','\x5c/\x5c/','aZRTk','com.tencent.miniapp.lua','cover',';\x20p_uin=o','uin','jumpUrl','51QENWhA','replace','uin=o10086','&type=8','uploadImageForOpenPlatform','tag','name','rxOHn','CiCVt','preview','GET','ihmPY','aYtGs','songinfo','tianxuan.imgJumpArk','p_skey','prompt','BEUhP','QQ音乐','POST',';\x20uin=o','772020zbjHbG','miniapp','sourcelogo','ZzGIs','&type=0','6948635nMUHmL','JNjJi','6aAXBzQ','mid','eiFFv','zNXgt','&ark=','https://api.leafone.cn/api/qqmusic?id=','1175438PJQrxe','https://ws.stream.qqmusic.qq.com/','zmaEp','https://u.y.qq.com/cgi-bin/musicu.fcg?format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&needNewCode=0&data={\x22comm\x22:{\x22ct\x22:24,\x22cv\x22:0},\x22songinfo\x22:{\x22method\x22:\x22get_song_detail_yqq\x22,\x22param\x22:{\x22song_type\x22:0,\x22song_mid\x22:\x22\x22,\x22song_id\x22:','wOLWR','nyEKm','pFDln','genBkn','unlink','80FHfBkS','kRXxC','EnuKx','application/json','normal','tKmkq','zFhYY','url','p_skey=','title','com.tencent.qqreader.share','},\x22module\x22:\x22music.pf_song_detail_svr\x22}}','bdIFC','https://h5.qzone.qq.com/v2/vip/tx/trpc/ark-share/GenNewSignedArk?g_tk=','HttpGetJson'];_0x3414=function(){return _0x1e8a51;};return _0x3414();}export async function SignMusicWrapper(_0x165a18=''){const _0x5a1285=_0x1789,_0x2449b8={'ysMwv':function(_0x2da154,_0x412050){return _0x2da154(_0x412050);},'qDeYu':function(_0x83e341,_0x27da53){return _0x83e341(_0x27da53);},'sObGt':function(_0x491255,_0x548e95){return _0x491255||_0x548e95;},'ZzGIs':function(_0x27f394,_0x1a7293,_0xcb51e,_0x164707,_0x432df1,_0x17f371){return _0x27f394(_0x1a7293,_0xcb51e,_0x164707,_0x432df1,_0x17f371);},'pFDln':function(_0x274f8f,_0x3c63d5){return _0x274f8f+_0x3c63d5;}};let _0x240401=await _0x2449b8[_0x5a1285(0x1f3)](CreateMusicThridWay0,_0x165a18);const {path:_0x281356,isLocal:_0x1941ba,errMsg:_0x3b75ec}=await _0x2449b8[_0x5a1285(0x244)](uri2local,_0x240401[_0x5a1285(0x1fa)]);if(_0x2449b8[_0x5a1285(0x239)](_0x3b75ec,!_0x281356))throw'卡片图片不正确';await checkFileReceived2(_0x281356,0x1388);let _0x30961b=await RequestUtil[_0x5a1285(0x202)](_0x281356);!_0x1941ba&&_0x5b5ce2[_0x5a1285(0x228)](_0x281356,()=>{});let _0x15af3a=await _0x2449b8[_0x5a1285(0x216)](SignMusicInternal,_0x240401[_0x5a1285(0x204)],_0x240401['singer'],_0x30961b,_0x240401[_0x5a1285(0x21b)],_0x2449b8[_0x5a1285(0x226)](_0x5a1285(0x221),_0x240401[_0x5a1285(0x230)]));return _0x15af3a;}